(function(){"use strict";try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode('/*! tailwindcss v4.1.4 | MIT License | https://tailwindcss.com */@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-font-weight:initial}}}@layer theme{:root,:host{--tw-font-sans:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--tw-spacing:.25rem;--tw-container-5xl:64rem;--tw-text-2xl:1.5rem;--tw-text-2xl--line-height:calc(2/1.5);--tw-text-3xl:1.875rem;--tw-text-3xl--line-height: 1.2 ;--tw-text-5xl:3rem;--tw-text-5xl--line-height:1;--tw-font-weight-light:300}}@layer base,components;@layer utilities{.tw\\:m-8{margin:calc(var(--tw-spacing)*8)}.tw\\:grid{display:grid}.tw\\:max-w-5xl{max-width:var(--tw-container-5xl)}.tw\\:grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.tw\\:p-0{padding:calc(var(--tw-spacing)*0)}.tw\\:px-1{padding-inline:calc(var(--tw-spacing)*1)}.tw\\:px-10{padding-inline:calc(var(--tw-spacing)*10)}.tw\\:font-sans{font-family:var(--tw-font-sans)}.tw\\:text-2xl{font-size:var(--tw-text-2xl);line-height:var(--tw-leading,var(--tw-text-2xl--line-height))}.tw\\:text-3xl{font-size:var(--tw-text-3xl);line-height:var(--tw-leading,var(--tw-text-3xl--line-height))}.tw\\:text-5xl{font-size:var(--tw-text-5xl);line-height:var(--tw-leading,var(--tw-text-5xl--line-height))}.tw\\:font-light{--tw-font-weight:var(--tw-font-weight-light);font-weight:var(--tw-font-weight-light)}@media (min-width:40rem){.tw\\:sm\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.tw\\:sm\\:gap-4{gap:calc(var(--tw-spacing)*4)}.tw\\:sm\\:gap-8{gap:calc(var(--tw-spacing)*8)}.tw\\:sm\\:p-0{padding:calc(var(--tw-spacing)*0)}}.debug-grid-16{background-image:linear-gradient(90deg,#0000ff1a 1px,#0000 1px),linear-gradient(#0000ff1a 1px,#0000 1px);background-repeat:repeat;background-size:6.25% 6.25%,6.25% 6.25%}}.explorable *,.explorable :before,.explorable :after{box-sizing:border-box}@property --tw-font-weight{syntax:"*";inherits:false}._widget_18g36_1{stroke:#969696;stroke-width:1px;cursor:pointer;pointer-events:all;stroke-opacity:1;fill-opacity:1;fill:#ccc;font-size:16px}._widget_18g36_1 ._title_18g36_12{font-size:20px;fill:#000;stroke:none;text-anchor:middle}._widget_18g36_1 ._label_18g36_19{fill:#000;stroke:none}._widget_18g36_1 ._lit_18g36_24{fill:#eee}._button_18g36_29>._symbol_18g36_29,._radio_18g36_29>._radiobutton_18g36_29>._symbol_18g36_29{fill:#fff;fill-rule:nonzero;pointer-events:none}._widget_18g36_1 ._symbol_18g36_29._selected_18g36_35,._toggle_18g36_35._selected_18g36_35,._widget_18g36_1 ._symbol_18g36_29._selected_18g36_35._lit_18g36_24{fill:#000}._widget_18g36_1 ._symbol_18g36_29._lit_18g36_24{fill:#bbb}._slider_18g36_44>._track_18g36_44,._toggle_18g36_35>._track_18g36_44{pointer-events:none}._slider_18g36_44>._track_overlay_18g36_48,._toggle_18g36_35>._track_overlay_18g36_48{pointer-events:all;cursor:pointer;fill:transparent;stroke:transparent}._slider_18g36_44>._handle_18g36_55,._toggle_18g36_35>._handle_18g36_55{fill:#fff}._node_ltm0z_1{stroke:#000;stroke-width:.5}._edge_ltm0z_7{stroke:gray;opacity:.7}._spike_ltm0z_20{stroke-width:8px}')),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();
(function(C,bt){typeof exports=="object"&&typeof module<"u"?bt(exports):typeof define=="function"&&define.amd?define(["exports"],bt):(C=typeof globalThis<"u"?globalThis:C||self,bt(C.echo_chambers={}))})(this,function(C){"use strict";const bt={display_type:"svg",debug:!1,controls_border:"",display_border:"",debug_lattice:"debug-grid-16",controls_grid:{nx:12,ny:12},display_size:{width:500,height:500},controls_size:{width:480,height:480},display_class:" tw:p-0",controls_class:"tw:p-0",container_class:"tw:font-sans tw:grid tw:grid-cols-1 tw:sm:grid-cols-2 tw:sm:gap-8 tw:px-1 tw:sm:p-0 tw:m-8"};function jt(t,n){return t==null||n==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function ho(t,n){return t==null||n==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function Ze(t){let n,e,r;t.length!==2?(n=jt,e=(s,u)=>jt(t(s),u),r=(s,u)=>t(s)-u):(n=t===jt||t===ho?t:po,e=t,r=t);function i(s,u,l=0,f=s.length){if(l<f){if(n(u,u)!==0)return f;do{const h=l+f>>>1;e(s[h],u)<0?l=h+1:f=h}while(l<f)}return l}function o(s,u,l=0,f=s.length){if(l<f){if(n(u,u)!==0)return f;do{const h=l+f>>>1;e(s[h],u)<=0?l=h+1:f=h}while(l<f)}return l}function a(s,u,l=0,f=s.length){const h=i(s,u,l,f-1);return h>l&&r(s[h-1],u)>-r(s[h],u)?h-1:h}return{left:i,center:a,right:o}}function po(){return 0}function go(t){return t===null?NaN:+t}const yo=Ze(jt).right;Ze(go).center;function _o(t,n){let e,r;if(n===void 0)for(const i of t)i!=null&&(e===void 0?i>=i&&(e=r=i):(e>i&&(e=i),r<i&&(r=i)));else{let i=-1;for(let o of t)(o=n(o,++i,t))!=null&&(e===void 0?o>=o&&(e=r=o):(e>o&&(e=o),r<o&&(r=o)))}return[e,r]}const mo=Math.sqrt(50),vo=Math.sqrt(10),wo=Math.sqrt(2);function tn(t,n,e){const r=(n-t)/Math.max(0,e),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=mo?10:o>=vo?5:o>=wo?2:1;let s,u,l;return i<0?(l=Math.pow(10,-i)/a,s=Math.round(t*l),u=Math.round(n*l),s/l<t&&++s,u/l>n&&--u,l=-l):(l=Math.pow(10,i)*a,s=Math.round(t/l),u=Math.round(n/l),s*l<t&&++s,u*l>n&&--u),u<s&&.5<=e&&e<2?tn(t,n,e*2):[s,u,l]}function xo(t,n,e){if(n=+n,t=+t,e=+e,!(e>0))return[];if(t===n)return[t];const r=n<t,[i,o,a]=r?tn(n,t,e):tn(t,n,e);if(!(o>=i))return[];const s=o-i+1,u=new Array(s);if(r)if(a<0)for(let l=0;l<s;++l)u[l]=(o-l)/-a;else for(let l=0;l<s;++l)u[l]=(o-l)*a;else if(a<0)for(let l=0;l<s;++l)u[l]=(i+l)/-a;else for(let l=0;l<s;++l)u[l]=(i+l)*a;return u}function Un(t,n,e){return n=+n,t=+t,e=+e,tn(t,n,e)[2]}function bo(t,n,e){n=+n,t=+t,e=+e;const r=n<t,i=r?Un(n,t,e):Un(t,n,e);return(r?-1:1)*(i<0?1/-i:i)}function nn(t,n){let e;for(const r of t)r!=null&&(e<r||e===void 0&&r>=r)&&(e=r);return e}function Mo(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=Math.max(0,Math.ceil((n-t)/e))|0,o=new Array(i);++r<i;)o[r]=t+r*e;return o}function $o(t){return t}var Yn=1,Vn=2,Kn=3,Ot=4,We=1e-6;function Ao(t){return"translate("+t+",0)"}function To(t){return"translate(0,"+t+")"}function No(t){return n=>+t(n)}function So(t,n){return n=Math.max(0,t.bandwidth()-n*2)/2,t.round()&&(n=Math.round(n)),e=>+t(e)+n}function Po(){return!this.__axis}function Je(t,n){var e=[],r=null,i=null,o=6,a=6,s=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=t===Yn||t===Ot?-1:1,f=t===Ot||t===Vn?"x":"y",h=t===Yn||t===Kn?Ao:To;function c(d){var p=r??(n.ticks?n.ticks.apply(n,e):n.domain()),m=i??(n.tickFormat?n.tickFormat.apply(n,e):$o),_=Math.max(o,0)+s,g=n.range(),v=+g[0]+u,x=+g[g.length-1]+u,y=(n.bandwidth?So:No)(n.copy(),u),w=d.selection?d.selection():d,$=w.selectAll(".domain").data([null]),A=w.selectAll(".tick").data(p,n).order(),T=A.exit(),S=A.enter().append("g").attr("class","tick"),P=A.select("line"),b=A.select("text");$=$.merge($.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),A=A.merge(S),P=P.merge(S.append("line").attr("stroke","currentColor").attr(f+"2",l*o)),b=b.merge(S.append("text").attr("fill","currentColor").attr(f,l*_).attr("dy",t===Yn?"0em":t===Kn?"0.71em":"0.32em")),d!==w&&($=$.transition(d),A=A.transition(d),P=P.transition(d),b=b.transition(d),T=T.transition(d).attr("opacity",We).attr("transform",function(z){return isFinite(z=y(z))?h(z+u):this.getAttribute("transform")}),S.attr("opacity",We).attr("transform",function(z){var E=this.parentNode.__axis;return h((E&&isFinite(E=E(z))?E:y(z))+u)})),T.remove(),$.attr("d",t===Ot||t===Vn?a?"M"+l*a+","+v+"H"+u+"V"+x+"H"+l*a:"M"+u+","+v+"V"+x:a?"M"+v+","+l*a+"V"+u+"H"+x+"V"+l*a:"M"+v+","+u+"H"+x),A.attr("opacity",1).attr("transform",function(z){return h(y(z)+u)}),P.attr(f+"2",l*o),b.attr(f,l*_).text(m),w.filter(Po).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Vn?"start":t===Ot?"end":"middle"),w.each(function(){this.__axis=y})}return c.scale=function(d){return arguments.length?(n=d,c):n},c.ticks=function(){return e=Array.from(arguments),c},c.tickArguments=function(d){return arguments.length?(e=d==null?[]:Array.from(d),c):e.slice()},c.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),c):r&&r.slice()},c.tickFormat=function(d){return arguments.length?(i=d,c):i},c.tickSize=function(d){return arguments.length?(o=a=+d,c):o},c.tickSizeInner=function(d){return arguments.length?(o=+d,c):o},c.tickSizeOuter=function(d){return arguments.length?(a=+d,c):a},c.tickPadding=function(d){return arguments.length?(s=+d,c):s},c.offset=function(d){return arguments.length?(u=+d,c):u},c}function Eo(t){return Je(Kn,t)}function ko(t){return Je(Ot,t)}var zo={value:()=>{}};function en(){for(var t=0,n=arguments.length,e={},r;t<n;++t){if(!(r=arguments[t]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new rn(e)}function rn(t){this._=t}function Io(t,n){return t.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");if(i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}rn.prototype=en.prototype={constructor:rn,on:function(t,n){var e=this._,r=Io(t+"",e),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=Oo(e[i],t.name)))return i;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++o<a;)if(i=(t=r[o]).type)e[i]=Qe(e[i],t.name,n);else if(n==null)for(i in e)e[i]=Qe(e[i],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new rn(t)},call:function(t,n){if((i=arguments.length-2)>0)for(var e=new Array(i),r=0,i,o;r<i;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};function Oo(t,n){for(var e=0,r=t.length,i;e<r;++e)if((i=t[e]).name===n)return i.value}function Qe(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=zo,t=t.slice(0,r).concat(t.slice(r+1));break}return e!=null&&t.push({name:n,value:e}),t}var Zn="http://www.w3.org/1999/xhtml";const je={svg:"http://www.w3.org/2000/svg",xhtml:Zn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function on(t){var n=t+="",e=n.indexOf(":");return e>=0&&(n=t.slice(0,e))!=="xmlns"&&(t=t.slice(e+1)),je.hasOwnProperty(n)?{space:je[n],local:t}:t}function Co(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===Zn&&n.documentElement.namespaceURI===Zn?n.createElement(t):n.createElementNS(e,t)}}function Ro(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function tr(t){var n=on(t);return(n.local?Ro:Co)(n)}function Fo(){}function Wn(t){return t==null?Fo:function(){return this.querySelector(t)}}function Lo(t){typeof t!="function"&&(t=Wn(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],a=o.length,s=r[i]=new Array(a),u,l,f=0;f<a;++f)(u=o[f])&&(l=t.call(u,u.__data__,f,o))&&("__data__"in u&&(l.__data__=u.__data__),s[f]=l);return new D(r,this._parents)}function Do(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ho(){return[]}function nr(t){return t==null?Ho:function(){return this.querySelectorAll(t)}}function qo(t){return function(){return Do(t.apply(this,arguments))}}function Bo(t){typeof t=="function"?t=qo(t):t=nr(t);for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var a=n[o],s=a.length,u,l=0;l<s;++l)(u=a[l])&&(r.push(t.call(u,u.__data__,l,a)),i.push(u));return new D(r,i)}function er(t){return function(){return this.matches(t)}}function rr(t){return function(n){return n.matches(t)}}var Xo=Array.prototype.find;function Go(t){return function(){return Xo.call(this.children,t)}}function Uo(){return this.firstElementChild}function Yo(t){return this.select(t==null?Uo:Go(typeof t=="function"?t:rr(t)))}var Vo=Array.prototype.filter;function Ko(){return Array.from(this.children)}function Zo(t){return function(){return Vo.call(this.children,t)}}function Wo(t){return this.selectAll(t==null?Ko:Zo(typeof t=="function"?t:rr(t)))}function Jo(t){typeof t!="function"&&(t=er(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],a=o.length,s=r[i]=[],u,l=0;l<a;++l)(u=o[l])&&t.call(u,u.__data__,l,o)&&s.push(u);return new D(r,this._parents)}function ir(t){return new Array(t.length)}function Qo(){return new D(this._enter||this._groups.map(ir),this._parents)}function an(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}an.prototype={constructor:an,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function jo(t){return function(){return t}}function ta(t,n,e,r,i,o){for(var a=0,s,u=n.length,l=o.length;a<l;++a)(s=n[a])?(s.__data__=o[a],r[a]=s):e[a]=new an(t,o[a]);for(;a<u;++a)(s=n[a])&&(i[a]=s)}function na(t,n,e,r,i,o,a){var s,u,l=new Map,f=n.length,h=o.length,c=new Array(f),d;for(s=0;s<f;++s)(u=n[s])&&(c[s]=d=a.call(u,u.__data__,s,n)+"",l.has(d)?i[s]=u:l.set(d,u));for(s=0;s<h;++s)d=a.call(t,o[s],s,o)+"",(u=l.get(d))?(r[s]=u,u.__data__=o[s],l.delete(d)):e[s]=new an(t,o[s]);for(s=0;s<f;++s)(u=n[s])&&l.get(c[s])===u&&(i[s]=u)}function ea(t){return t.__data__}function ra(t,n){if(!arguments.length)return Array.from(this,ea);var e=n?na:ta,r=this._parents,i=this._groups;typeof t!="function"&&(t=jo(t));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),l=0;l<o;++l){var f=r[l],h=i[l],c=h.length,d=ia(t.call(f,f&&f.__data__,l,r)),p=d.length,m=s[l]=new Array(p),_=a[l]=new Array(p),g=u[l]=new Array(c);e(f,h,m,_,g,d,n);for(var v=0,x=0,y,w;v<p;++v)if(y=m[v]){for(v>=x&&(x=v+1);!(w=_[x])&&++x<p;);y._next=w||null}}return a=new D(a,r),a._enter=s,a._exit=u,a}function ia(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function oa(){return new D(this._exit||this._groups.map(ir),this._parents)}function aa(t,n,e){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),n!=null&&(i=n(i),i&&(i=i.selection())),e==null?o.remove():e(o),r&&i?r.merge(i).order():i}function sa(t){for(var n=t.selection?t.selection():t,e=this._groups,r=n._groups,i=e.length,o=r.length,a=Math.min(i,o),s=new Array(i),u=0;u<a;++u)for(var l=e[u],f=r[u],h=l.length,c=s[u]=new Array(h),d,p=0;p<h;++p)(d=l[p]||f[p])&&(c[p]=d);for(;u<i;++u)s[u]=e[u];return new D(s,this._parents)}function ua(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r=t[n],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function la(t){t||(t=fa);function n(h,c){return h&&c?t(h.__data__,c.__data__):!h-!c}for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var a=e[o],s=a.length,u=i[o]=new Array(s),l,f=0;f<s;++f)(l=a[f])&&(u[f]=l);u.sort(n)}return new D(i,this._parents).order()}function fa(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function ca(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ha(){return Array.from(this)}function da(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function pa(){let t=0;for(const n of this)++t;return t}function ga(){return!this.node()}function ya(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],o=0,a=i.length,s;o<a;++o)(s=i[o])&&t.call(s,s.__data__,o,i);return this}function _a(t){return function(){this.removeAttribute(t)}}function ma(t){return function(){this.removeAttributeNS(t.space,t.local)}}function va(t,n){return function(){this.setAttribute(t,n)}}function wa(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function xa(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttribute(t):this.setAttribute(t,e)}}function ba(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function Ma(t,n){var e=on(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((n==null?e.local?ma:_a:typeof n=="function"?e.local?ba:xa:e.local?wa:va)(e,n))}function or(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function $a(t){return function(){this.style.removeProperty(t)}}function Aa(t,n,e){return function(){this.style.setProperty(t,n,e)}}function Ta(t,n,e){return function(){var r=n.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function Na(t,n,e){return arguments.length>1?this.each((n==null?$a:typeof n=="function"?Ta:Aa)(t,n,e??"")):Mt(this.node(),t)}function Mt(t,n){return t.style.getPropertyValue(n)||or(t).getComputedStyle(t,null).getPropertyValue(n)}function Sa(t){return function(){delete this[t]}}function Pa(t,n){return function(){this[t]=n}}function Ea(t,n){return function(){var e=n.apply(this,arguments);e==null?delete this[t]:this[t]=e}}function ka(t,n){return arguments.length>1?this.each((n==null?Sa:typeof n=="function"?Ea:Pa)(t,n)):this.node()[t]}function ar(t){return t.trim().split(/^|\s+/)}function Jn(t){return t.classList||new sr(t)}function sr(t){this._node=t,this._names=ar(t.getAttribute("class")||"")}sr.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ur(t,n){for(var e=Jn(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function lr(t,n){for(var e=Jn(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function za(t){return function(){ur(this,t)}}function Ia(t){return function(){lr(this,t)}}function Oa(t,n){return function(){(n.apply(this,arguments)?ur:lr)(this,t)}}function Ca(t,n){var e=ar(t+"");if(arguments.length<2){for(var r=Jn(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each((typeof n=="function"?Oa:n?za:Ia)(e,n))}function Ra(){this.textContent=""}function Fa(t){return function(){this.textContent=t}}function La(t){return function(){var n=t.apply(this,arguments);this.textContent=n??""}}function Da(t){return arguments.length?this.each(t==null?Ra:(typeof t=="function"?La:Fa)(t)):this.node().textContent}function Ha(){this.innerHTML=""}function qa(t){return function(){this.innerHTML=t}}function Ba(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n??""}}function Xa(t){return arguments.length?this.each(t==null?Ha:(typeof t=="function"?Ba:qa)(t)):this.node().innerHTML}function Ga(){this.nextSibling&&this.parentNode.appendChild(this)}function Ua(){return this.each(Ga)}function Ya(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Va(){return this.each(Ya)}function Ka(t){var n=typeof t=="function"?t:tr(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function Za(){return null}function Wa(t,n){var e=typeof t=="function"?t:tr(t),r=n==null?Za:typeof n=="function"?n:Wn(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})}function Ja(){var t=this.parentNode;t&&t.removeChild(this)}function Qa(){return this.each(Ja)}function ja(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function ts(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function ns(t){return this.select(t?ts:ja)}function es(t){return arguments.length?this.property("__data__",t):this.node().__data__}function rs(t){return function(n){t.call(this,n,this.__data__)}}function is(t){return t.trim().split(/^|\s+/).map(function(n){var e="",r=n.indexOf(".");return r>=0&&(e=n.slice(r+1),n=n.slice(0,r)),{type:n,name:e}})}function os(t){return function(){var n=this.__on;if(n){for(var e=0,r=-1,i=n.length,o;e<i;++e)o=n[e],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):n[++r]=o;++r?n.length=r:delete this.__on}}}function as(t,n,e){return function(){var r=this.__on,i,o=rs(n);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=e),i.value=n;return}}this.addEventListener(t.type,o,e),i={type:t.type,name:t.name,value:n,listener:o,options:e},r?r.push(i):this.__on=[i]}}function ss(t,n,e){var r=is(t+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,l=s.length,f;u<l;++u)for(i=0,f=s[u];i<o;++i)if((a=r[i]).type===f.type&&a.name===f.name)return f.value}return}for(s=n?as:os,i=0;i<o;++i)this.each(s(r[i],n,e));return this}function fr(t,n,e){var r=or(t),i=r.CustomEvent;typeof i=="function"?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function us(t,n){return function(){return fr(this,t,n)}}function ls(t,n){return function(){return fr(this,t,n.apply(this,arguments))}}function fs(t,n){return this.each((typeof n=="function"?ls:us)(t,n))}function*cs(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var cr=[null];function D(t,n){this._groups=t,this._parents=n}function Ct(){return new D([[document.documentElement]],cr)}function hs(){return this}D.prototype=Ct.prototype={constructor:D,select:Lo,selectAll:Bo,selectChild:Yo,selectChildren:Wo,filter:Jo,data:ra,enter:Qo,exit:oa,join:aa,merge:sa,selection:hs,order:ua,sort:la,call:ca,nodes:ha,node:da,size:pa,empty:ga,each:ya,attr:Ma,style:Na,property:ka,classed:Ca,text:Da,html:Xa,raise:Ua,lower:Va,append:Ka,insert:Wa,remove:Qa,clone:ns,datum:es,on:ss,dispatch:fs,[Symbol.iterator]:cs};function I(t){return typeof t=="string"?new D([[document.querySelector(t)]],[document.documentElement]):new D([[t]],cr)}function ds(t){let n;for(;n=t.sourceEvent;)t=n;return t}function Qn(t,n){if(t=ds(t),n===void 0&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(n.getScreenCTM().inverse()),[r.x,r.y]}if(n.getBoundingClientRect){var i=n.getBoundingClientRect();return[t.clientX-i.left-n.clientLeft,t.clientY-i.top-n.clientTop]}}return[t.pageX,t.pageY]}const ps={passive:!1},Rt={capture:!0,passive:!1};function jn(t){t.stopImmediatePropagation()}function $t(t){t.preventDefault(),t.stopImmediatePropagation()}function gs(t){var n=t.document.documentElement,e=I(t).on("dragstart.drag",$t,Rt);"onselectstart"in n?e.on("selectstart.drag",$t,Rt):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function ys(t,n){var e=t.document.documentElement,r=I(t).on("dragstart.drag",null);n&&(r.on("click.drag",$t,Rt),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}const sn=t=>()=>t;function te(t,{sourceEvent:n,subject:e,target:r,identifier:i,active:o,x:a,y:s,dx:u,dy:l,dispatch:f}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:f}})}te.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function _s(t){return!t.ctrlKey&&!t.button}function ms(){return this.parentNode}function vs(t,n){return n??{x:t.x,y:t.y}}function ws(){return navigator.maxTouchPoints||"ontouchstart"in this}function hr(){var t=_s,n=ms,e=vs,r=ws,i={},o=en("start","drag","end"),a=0,s,u,l,f,h=0;function c(y){y.on("mousedown.drag",d).filter(r).on("touchstart.drag",_).on("touchmove.drag",g,ps).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(y,w){if(!(f||!t.call(this,y,w))){var $=x(this,n.call(this,y,w),y,w,"mouse");$&&(I(y.view).on("mousemove.drag",p,Rt).on("mouseup.drag",m,Rt),gs(y.view),jn(y),l=!1,s=y.clientX,u=y.clientY,$("start",y))}}function p(y){if($t(y),!l){var w=y.clientX-s,$=y.clientY-u;l=w*w+$*$>h}i.mouse("drag",y)}function m(y){I(y.view).on("mousemove.drag mouseup.drag",null),ys(y.view,l),$t(y),i.mouse("end",y)}function _(y,w){if(t.call(this,y,w)){var $=y.changedTouches,A=n.call(this,y,w),T=$.length,S,P;for(S=0;S<T;++S)(P=x(this,A,y,w,$[S].identifier,$[S]))&&(jn(y),P("start",y,$[S]))}}function g(y){var w=y.changedTouches,$=w.length,A,T;for(A=0;A<$;++A)(T=i[w[A].identifier])&&($t(y),T("drag",y,w[A]))}function v(y){var w=y.changedTouches,$=w.length,A,T;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),A=0;A<$;++A)(T=i[w[A].identifier])&&(jn(y),T("end",y,w[A]))}function x(y,w,$,A,T,S){var P=o.copy(),b=Qn(S||$,w),z,E,W;if((W=e.call(y,new te("beforestart",{sourceEvent:$,target:c,identifier:T,active:a,x:b[0],y:b[1],dx:0,dy:0,dispatch:P}),A))!=null)return z=W.x-b[0]||0,E=W.y-b[1]||0,function Gn(lt,xt,It){var U=b,Ke;switch(lt){case"start":i[T]=Gn,Ke=a++;break;case"end":delete i[T],--a;case"drag":b=Qn(It||xt,w),Ke=a;break}P.call(lt,y,new te(lt,{sourceEvent:xt,subject:W,target:c,identifier:T,active:Ke,x:b[0]+z,y:b[1]+E,dx:b[0]-U[0],dy:b[1]-U[1],dispatch:P}),A)}}return c.filter=function(y){return arguments.length?(t=typeof y=="function"?y:sn(!!y),c):t},c.container=function(y){return arguments.length?(n=typeof y=="function"?y:sn(y),c):n},c.subject=function(y){return arguments.length?(e=typeof y=="function"?y:sn(y),c):e},c.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:sn(!!y),c):r},c.on=function(){var y=o.on.apply(o,arguments);return y===o?c:y},c.clickDistance=function(y){return arguments.length?(h=(y=+y)*y,c):Math.sqrt(h)},c}function ne(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function dr(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function Ft(){}var Lt=.7,un=1/Lt,At="\\s*([+-]?\\d+)\\s*",Dt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",J="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xs=/^#([0-9a-f]{3,8})$/,bs=new RegExp(`^rgb\\(${At},${At},${At}\\)$`),Ms=new RegExp(`^rgb\\(${J},${J},${J}\\)$`),$s=new RegExp(`^rgba\\(${At},${At},${At},${Dt}\\)$`),As=new RegExp(`^rgba\\(${J},${J},${J},${Dt}\\)$`),Ts=new RegExp(`^hsl\\(${Dt},${J},${J}\\)$`),Ns=new RegExp(`^hsla\\(${Dt},${J},${J},${Dt}\\)$`),pr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ne(Ft,ft,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:gr,formatHex:gr,formatHex8:Ss,formatHsl:Ps,formatRgb:yr,toString:yr});function gr(){return this.rgb().formatHex()}function Ss(){return this.rgb().formatHex8()}function Ps(){return xr(this).formatHsl()}function yr(){return this.rgb().formatRgb()}function ft(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=xs.exec(t))?(e=n[1].length,n=parseInt(n[1],16),e===6?_r(n):e===3?new L(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):e===8?ln(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):e===4?ln(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=bs.exec(t))?new L(n[1],n[2],n[3],1):(n=Ms.exec(t))?new L(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=$s.exec(t))?ln(n[1],n[2],n[3],n[4]):(n=As.exec(t))?ln(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=Ts.exec(t))?wr(n[1],n[2]/100,n[3]/100,1):(n=Ns.exec(t))?wr(n[1],n[2]/100,n[3]/100,n[4]):pr.hasOwnProperty(t)?_r(pr[t]):t==="transparent"?new L(NaN,NaN,NaN,0):null}function _r(t){return new L(t>>16&255,t>>8&255,t&255,1)}function ln(t,n,e,r){return r<=0&&(t=n=e=NaN),new L(t,n,e,r)}function Es(t){return t instanceof Ft||(t=ft(t)),t?(t=t.rgb(),new L(t.r,t.g,t.b,t.opacity)):new L}function ee(t,n,e,r){return arguments.length===1?Es(t):new L(t,n,e,r??1)}function L(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}ne(L,ee,dr(Ft,{brighter(t){return t=t==null?un:Math.pow(un,t),new L(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Lt:Math.pow(Lt,t),new L(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new L(ct(this.r),ct(this.g),ct(this.b),fn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:mr,formatHex:mr,formatHex8:ks,formatRgb:vr,toString:vr}));function mr(){return`#${ht(this.r)}${ht(this.g)}${ht(this.b)}`}function ks(){return`#${ht(this.r)}${ht(this.g)}${ht(this.b)}${ht((isNaN(this.opacity)?1:this.opacity)*255)}`}function vr(){const t=fn(this.opacity);return`${t===1?"rgb(":"rgba("}${ct(this.r)}, ${ct(this.g)}, ${ct(this.b)}${t===1?")":`, ${t})`}`}function fn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ct(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ht(t){return t=ct(t),(t<16?"0":"")+t.toString(16)}function wr(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new Y(t,n,e,r)}function xr(t){if(t instanceof Y)return new Y(t.h,t.s,t.l,t.opacity);if(t instanceof Ft||(t=ft(t)),!t)return new Y;if(t instanceof Y)return t;t=t.rgb();var n=t.r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),a=NaN,s=o-i,u=(o+i)/2;return s?(n===o?a=(e-r)/s+(e<r)*6:e===o?a=(r-n)/s+2:a=(n-e)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new Y(a,s,u,t.opacity)}function zs(t,n,e,r){return arguments.length===1?xr(t):new Y(t,n,e,r??1)}function Y(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}ne(Y,zs,dr(Ft,{brighter(t){return t=t==null?un:Math.pow(un,t),new Y(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Lt:Math.pow(Lt,t),new Y(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new L(re(t>=240?t-240:t+120,i,r),re(t,i,r),re(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Y(br(this.h),cn(this.s),cn(this.l),fn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=fn(this.opacity);return`${t===1?"hsl(":"hsla("}${br(this.h)}, ${cn(this.s)*100}%, ${cn(this.l)*100}%${t===1?")":`, ${t})`}`}}));function br(t){return t=(t||0)%360,t<0?t+360:t}function cn(t){return Math.max(0,Math.min(1,t||0))}function re(t,n,e){return(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)*255}const ie=t=>()=>t;function Is(t,n){return function(e){return t+e*n}}function Os(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}function Cs(t){return(t=+t)==1?Mr:function(n,e){return e-n?Os(n,e,t):ie(isNaN(n)?e:n)}}function Mr(t,n){var e=n-t;return e?Is(t,e):ie(isNaN(t)?n:t)}const hn=function t(n){var e=Cs(n);function r(i,o){var a=e((i=ee(i)).r,(o=ee(o)).r),s=e(i.g,o.g),u=e(i.b,o.b),l=Mr(i.opacity,o.opacity);return function(f){return i.r=a(f),i.g=s(f),i.b=u(f),i.opacity=l(f),i+""}}return r.gamma=t,r}(1);function Rs(t,n){n||(n=[]);var e=t?Math.min(n.length,t.length):0,r=n.slice(),i;return function(o){for(i=0;i<e;++i)r[i]=t[i]*(1-o)+n[i]*o;return r}}function Fs(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ls(t,n){var e=n?n.length:0,r=t?Math.min(e,t.length):0,i=new Array(r),o=new Array(e),a;for(a=0;a<r;++a)i[a]=se(t[a],n[a]);for(;a<e;++a)o[a]=n[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function Ds(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}}function V(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function Hs(t,n){var e={},r={},i;(t===null||typeof t!="object")&&(t={}),(n===null||typeof n!="object")&&(n={});for(i in n)i in t?e[i]=se(t[i],n[i]):r[i]=n[i];return function(o){for(i in e)r[i]=e[i](o);return r}}var oe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ae=new RegExp(oe.source,"g");function qs(t){return function(){return t}}function Bs(t){return function(n){return t(n)+""}}function $r(t,n){var e=oe.lastIndex=ae.lastIndex=0,r,i,o,a=-1,s=[],u=[];for(t=t+"",n=n+"";(r=oe.exec(t))&&(i=ae.exec(n));)(o=i.index)>e&&(o=n.slice(e,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,u.push({i:a,x:V(r,i)})),e=ae.lastIndex;return e<n.length&&(o=n.slice(e),s[a]?s[a]+=o:s[++a]=o),s.length<2?u[0]?Bs(u[0].x):qs(n):(n=u.length,function(l){for(var f=0,h;f<n;++f)s[(h=u[f]).i]=h.x(l);return s.join("")})}function se(t,n){var e=typeof n,r;return n==null||e==="boolean"?ie(n):(e==="number"?V:e==="string"?(r=ft(n))?(n=r,hn):$r:n instanceof ft?hn:n instanceof Date?Ds:Fs(n)?Rs:Array.isArray(n)?Ls:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?Hs:V)(t,n)}function Xs(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}var Ar=180/Math.PI,ue={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Tr(t,n,e,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+n*n))&&(t/=a,n/=a),(u=t*e+n*r)&&(e-=t*u,r-=n*u),(s=Math.sqrt(e*e+r*r))&&(e/=s,r/=s,u/=s),t*r<n*e&&(t=-t,n=-n,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*Ar,skewX:Math.atan(u)*Ar,scaleX:a,scaleY:s}}var dn;function Gs(t){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?ue:Tr(n.a,n.b,n.c,n.d,n.e,n.f)}function Us(t){return t==null||(dn||(dn=document.createElementNS("http://www.w3.org/2000/svg","g")),dn.setAttribute("transform",t),!(t=dn.transform.baseVal.consolidate()))?ue:(t=t.matrix,Tr(t.a,t.b,t.c,t.d,t.e,t.f))}function Nr(t,n,e,r){function i(l){return l.length?l.pop()+" ":""}function o(l,f,h,c,d,p){if(l!==h||f!==c){var m=d.push("translate(",null,n,null,e);p.push({i:m-4,x:V(l,h)},{i:m-2,x:V(f,c)})}else(h||c)&&d.push("translate("+h+n+c+e)}function a(l,f,h,c){l!==f?(l-f>180?f+=360:f-l>180&&(l+=360),c.push({i:h.push(i(h)+"rotate(",null,r)-2,x:V(l,f)})):f&&h.push(i(h)+"rotate("+f+r)}function s(l,f,h,c){l!==f?c.push({i:h.push(i(h)+"skewX(",null,r)-2,x:V(l,f)}):f&&h.push(i(h)+"skewX("+f+r)}function u(l,f,h,c,d,p){if(l!==h||f!==c){var m=d.push(i(d)+"scale(",null,",",null,")");p.push({i:m-4,x:V(l,h)},{i:m-2,x:V(f,c)})}else(h!==1||c!==1)&&d.push(i(d)+"scale("+h+","+c+")")}return function(l,f){var h=[],c=[];return l=t(l),f=t(f),o(l.translateX,l.translateY,f.translateX,f.translateY,h,c),a(l.rotate,f.rotate,h,c),s(l.skewX,f.skewX,h,c),u(l.scaleX,l.scaleY,f.scaleX,f.scaleY,h,c),l=f=null,function(d){for(var p=-1,m=c.length,_;++p<m;)h[(_=c[p]).i]=_.x(d);return h.join("")}}}var Ys=Nr(Gs,"px, ","px)","deg)"),Vs=Nr(Us,", ",")",")"),Tt=0,Ht=0,qt=0,Sr=1e3,pn,Bt,gn=0,dt=0,yn=0,Xt=typeof performance=="object"&&performance.now?performance:Date,Pr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function _n(){return dt||(Pr(Ks),dt=Xt.now()+yn)}function Ks(){dt=0}function Gt(){this._call=this._time=this._next=null}Gt.prototype=le.prototype={constructor:Gt,restart:function(t,n,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?_n():+e)+(n==null?0:+n),!this._next&&Bt!==this&&(Bt?Bt._next=this:pn=this,Bt=this),this._call=t,this._time=e,fe()},stop:function(){this._call&&(this._call=null,this._time=1/0,fe())}};function le(t,n,e){var r=new Gt;return r.restart(t,n,e),r}function Zs(){_n(),++Tt;for(var t=pn,n;t;)(n=dt-t._time)>=0&&t._call.call(void 0,n),t=t._next;--Tt}function Er(){dt=(gn=Xt.now())+yn,Tt=Ht=0;try{Zs()}finally{Tt=0,Js(),dt=0}}function Ws(){var t=Xt.now(),n=t-gn;n>Sr&&(yn-=n,gn=t)}function Js(){for(var t,n=pn,e,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:pn=e);Bt=t,fe(r)}function fe(t){if(!Tt){Ht&&(Ht=clearTimeout(Ht));var n=t-dt;n>24?(t<1/0&&(Ht=setTimeout(Er,t-Xt.now()-yn)),qt&&(qt=clearInterval(qt))):(qt||(gn=Xt.now(),qt=setInterval(Ws,Sr)),Tt=1,Pr(Er))}}function kr(t,n,e){var r=new Gt;return n=n==null?0:+n,r.restart(i=>{r.stop(),t(i+n)},n,e),r}function Qs(t,n,e){var r=new Gt,i=n;return r._restart=r.restart,r.restart=function(o,a,s){a=+a,s=s==null?_n():+s,r._restart(function u(l){l+=i,r._restart(u,i+=a,s),o(l)},a,s)},r.restart(t,n,e),r}var js=en("start","end","cancel","interrupt"),tu=[],zr=0,Ir=1,ce=2,mn=3,Or=4,he=5,vn=6;function wn(t,n,e,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(e in a)return;nu(t,e,{name:n,index:r,group:i,on:js,tween:tu,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:zr})}function de(t,n){var e=K(t,n);if(e.state>zr)throw new Error("too late; already scheduled");return e}function Q(t,n){var e=K(t,n);if(e.state>mn)throw new Error("too late; already running");return e}function K(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function nu(t,n,e){var r=t.__transition,i;r[n]=e,e.timer=le(o,0,e.time);function o(l){e.state=Ir,e.timer.restart(a,e.delay,e.time),e.delay<=l&&a(l-e.delay)}function a(l){var f,h,c,d;if(e.state!==Ir)return u();for(f in r)if(d=r[f],d.name===e.name){if(d.state===mn)return kr(a);d.state===Or?(d.state=vn,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[f]):+f<n&&(d.state=vn,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[f])}if(kr(function(){e.state===mn&&(e.state=Or,e.timer.restart(s,e.delay,e.time),s(l))}),e.state=ce,e.on.call("start",t,t.__data__,e.index,e.group),e.state===ce){for(e.state=mn,i=new Array(c=e.tween.length),f=0,h=-1;f<c;++f)(d=e.tween[f].value.call(t,t.__data__,e.index,e.group))&&(i[++h]=d);i.length=h+1}}function s(l){for(var f=l<e.duration?e.ease.call(null,l/e.duration):(e.timer.restart(u),e.state=he,1),h=-1,c=i.length;++h<c;)i[h].call(t,f);e.state===he&&(e.on.call("end",t,t.__data__,e.index,e.group),u())}function u(){e.state=vn,e.timer.stop(),delete r[n];for(var l in r)return;delete t.__transition}}function eu(t,n){var e=t.__transition,r,i,o=!0,a;if(e){n=n==null?null:n+"";for(a in e){if((r=e[a]).name!==n){o=!1;continue}i=r.state>ce&&r.state<he,r.state=vn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete e[a]}o&&delete t.__transition}}function ru(t){return this.each(function(){eu(this,t)})}function iu(t,n){var e,r;return function(){var i=Q(this,t),o=i.tween;if(o!==e){r=e=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===n){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function ou(t,n,e){var r,i;if(typeof e!="function")throw new Error;return function(){var o=Q(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:n,value:e},u=0,l=i.length;u<l;++u)if(i[u].name===n){i[u]=s;break}u===l&&i.push(s)}o.tween=i}}function au(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r=K(this.node(),e).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((n==null?iu:ou)(e,t,n))}function pe(t,n,e){var r=t._id;return t.each(function(){var i=Q(this,r);(i.value||(i.value={}))[n]=e.apply(this,arguments)}),function(i){return K(i,r).value[n]}}function Cr(t,n){var e;return(typeof n=="number"?V:n instanceof ft?hn:(e=ft(n))?(n=e,hn):$r)(t,n)}function su(t){return function(){this.removeAttribute(t)}}function uu(t){return function(){this.removeAttributeNS(t.space,t.local)}}function lu(t,n,e){var r,i=e+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=n(r=a,e)}}function fu(t,n,e){var r,i=e+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=n(r=a,e)}}function cu(t,n,e){var r,i,o;return function(){var a,s=e(this),u;return s==null?void this.removeAttribute(t):(a=this.getAttribute(t),u=s+"",a===u?null:a===r&&u===i?o:(i=u,o=n(r=a,s)))}}function hu(t,n,e){var r,i,o;return function(){var a,s=e(this),u;return s==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),u=s+"",a===u?null:a===r&&u===i?o:(i=u,o=n(r=a,s)))}}function du(t,n){var e=on(t),r=e==="transform"?Vs:Cr;return this.attrTween(t,typeof n=="function"?(e.local?hu:cu)(e,r,pe(this,"attr."+t,n)):n==null?(e.local?uu:su)(e):(e.local?fu:lu)(e,r,n))}function pu(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function gu(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function yu(t,n){var e,r;function i(){var o=n.apply(this,arguments);return o!==r&&(e=(r=o)&&gu(t,o)),e}return i._value=n,i}function _u(t,n){var e,r;function i(){var o=n.apply(this,arguments);return o!==r&&(e=(r=o)&&pu(t,o)),e}return i._value=n,i}function mu(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;var r=on(t);return this.tween(e,(r.local?yu:_u)(r,n))}function vu(t,n){return function(){de(this,t).delay=+n.apply(this,arguments)}}function wu(t,n){return n=+n,function(){de(this,t).delay=n}}function xu(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?vu:wu)(n,t)):K(this.node(),n).delay}function bu(t,n){return function(){Q(this,t).duration=+n.apply(this,arguments)}}function Mu(t,n){return n=+n,function(){Q(this,t).duration=n}}function $u(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?bu:Mu)(n,t)):K(this.node(),n).duration}function Au(t,n){if(typeof n!="function")throw new Error;return function(){Q(this,t).ease=n}}function Tu(t){var n=this._id;return arguments.length?this.each(Au(n,t)):K(this.node(),n).ease}function Nu(t,n){return function(){var e=n.apply(this,arguments);if(typeof e!="function")throw new Error;Q(this,t).ease=e}}function Su(t){if(typeof t!="function")throw new Error;return this.each(Nu(this._id,t))}function Pu(t){typeof t!="function"&&(t=er(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],a=o.length,s=r[i]=[],u,l=0;l<a;++l)(u=o[l])&&t.call(u,u.__data__,l,o)&&s.push(u);return new tt(r,this._parents,this._name,this._id)}function Eu(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u=n[s],l=e[s],f=u.length,h=a[s]=new Array(f),c,d=0;d<f;++d)(c=u[d]||l[d])&&(h[d]=c);for(;s<r;++s)a[s]=n[s];return new tt(a,this._parents,this._name,this._id)}function ku(t){return(t+"").trim().split(/^|\s+/).every(function(n){var e=n.indexOf(".");return e>=0&&(n=n.slice(0,e)),!n||n==="start"})}function zu(t,n,e){var r,i,o=ku(n)?de:Q;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(n,e),a.on=i}}function Iu(t,n){var e=this._id;return arguments.length<2?K(this.node(),e).on.on(t):this.each(zu(e,t,n))}function Ou(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}function Cu(){return this.on("end.remove",Ou(this._id))}function Ru(t){var n=this._name,e=this._id;typeof t!="function"&&(t=Wn(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],u=s.length,l=o[a]=new Array(u),f,h,c=0;c<u;++c)(f=s[c])&&(h=t.call(f,f.__data__,c,s))&&("__data__"in f&&(h.__data__=f.__data__),l[c]=h,wn(l[c],n,e,c,l,K(f,e)));return new tt(o,this._parents,n,e)}function Fu(t){var n=this._name,e=this._id;typeof t!="function"&&(t=nr(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u=r[s],l=u.length,f,h=0;h<l;++h)if(f=u[h]){for(var c=t.call(f,f.__data__,h,u),d,p=K(f,e),m=0,_=c.length;m<_;++m)(d=c[m])&&wn(d,n,e,m,c,p);o.push(c),a.push(f)}return new tt(o,a,n,e)}var Lu=Ct.prototype.constructor;function Du(){return new Lu(this._groups,this._parents)}function Hu(t,n){var e,r,i;return function(){var o=Mt(this,t),a=(this.style.removeProperty(t),Mt(this,t));return o===a?null:o===e&&a===r?i:i=n(e=o,r=a)}}function Rr(t){return function(){this.style.removeProperty(t)}}function qu(t,n,e){var r,i=e+"",o;return function(){var a=Mt(this,t);return a===i?null:a===r?o:o=n(r=a,e)}}function Bu(t,n,e){var r,i,o;return function(){var a=Mt(this,t),s=e(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(t),Mt(this,t))),a===u?null:a===r&&u===i?o:(i=u,o=n(r=a,s))}}function Xu(t,n){var e,r,i,o="style."+n,a="end."+o,s;return function(){var u=Q(this,t),l=u.on,f=u.value[o]==null?s||(s=Rr(n)):void 0;(l!==e||i!==f)&&(r=(e=l).copy()).on(a,i=f),u.on=r}}function Gu(t,n,e){var r=(t+="")=="transform"?Ys:Cr;return n==null?this.styleTween(t,Hu(t,r)).on("end.style."+t,Rr(t)):typeof n=="function"?this.styleTween(t,Bu(t,r,pe(this,"style."+t,n))).each(Xu(this._id,t)):this.styleTween(t,qu(t,r,n),e).on("end.style."+t,null)}function Uu(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}function Yu(t,n,e){var r,i;function o(){var a=n.apply(this,arguments);return a!==i&&(r=(i=a)&&Uu(t,a,e)),r}return o._value=n,o}function Vu(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;return this.tween(r,Yu(t,n,e??""))}function Ku(t){return function(){this.textContent=t}}function Zu(t){return function(){var n=t(this);this.textContent=n??""}}function Wu(t){return this.tween("text",typeof t=="function"?Zu(pe(this,"text",t)):Ku(t==null?"":t+""))}function Ju(t){return function(n){this.textContent=t.call(this,n)}}function Qu(t){var n,e;function r(){var i=t.apply(this,arguments);return i!==e&&(n=(e=i)&&Ju(i)),n}return r._value=t,r}function ju(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,Qu(t))}function tl(){for(var t=this._name,n=this._id,e=Fr(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,u,l=0;l<s;++l)if(u=a[l]){var f=K(u,n);wn(u,t,e,l,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new tt(r,this._parents,t,e)}function nl(){var t,n,e=this,r=e._id,i=e.size();return new Promise(function(o,a){var s={value:a},u={value:function(){--i===0&&o()}};e.each(function(){var l=Q(this,r),f=l.on;f!==t&&(n=(t=f).copy(),n._.cancel.push(s),n._.interrupt.push(s),n._.end.push(u)),l.on=n}),i===0&&o()})}var el=0;function tt(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function Fr(){return++el}var nt=Ct.prototype;tt.prototype={constructor:tt,select:Ru,selectAll:Fu,selectChild:nt.selectChild,selectChildren:nt.selectChildren,filter:Pu,merge:Eu,selection:Du,transition:tl,call:nt.call,nodes:nt.nodes,node:nt.node,size:nt.size,empty:nt.empty,each:nt.each,on:Iu,attr:du,attrTween:mu,style:Gu,styleTween:Vu,text:Wu,textTween:ju,remove:Cu,tween:au,delay:xu,duration:$u,ease:Tu,easeVarying:Su,end:nl,[Symbol.iterator]:nt[Symbol.iterator]};function rl(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var il={time:null,delay:0,duration:250,ease:rl};function ol(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}function al(t){var n,e;t instanceof tt?(n=t._id,t=t._name):(n=Fr(),(e=il).time=_n(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,u,l=0;l<s;++l)(u=a[l])&&wn(u,t,n,l,a,e||ol(u,n));return new tt(r,this._parents,t,n)}Ct.prototype.interrupt=ru,Ct.prototype.transition=al;const ge=Math.PI,ye=2*ge,pt=1e-6,sl=ye-pt;function Lr(t){this._+=t[0];for(let n=1,e=t.length;n<e;++n)this._+=arguments[n]+t[n]}function ul(t){let n=Math.floor(t);if(!(n>=0))throw new Error(`invalid digits: ${t}`);if(n>15)return Lr;const e=10**n;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*e)/e+r[i]}}class Dr{constructor(n){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=n==null?Lr:ul(n)}moveTo(n,e){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(n,e){this._append`L${this._x1=+n},${this._y1=+e}`}quadraticCurveTo(n,e,r,i){this._append`Q${+n},${+e},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(n,e,r,i,o,a){this._append`C${+n},${+e},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(n,e,r,i,o){if(n=+n,e=+e,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,u=r-n,l=i-e,f=a-n,h=s-e,c=f*f+h*h;if(this._x1===null)this._append`M${this._x1=n},${this._y1=e}`;else if(c>pt)if(!(Math.abs(h*u-l*f)>pt)||!o)this._append`L${this._x1=n},${this._y1=e}`;else{let d=r-a,p=i-s,m=u*u+l*l,_=d*d+p*p,g=Math.sqrt(m),v=Math.sqrt(c),x=o*Math.tan((ge-Math.acos((m+c-_)/(2*g*v)))/2),y=x/v,w=x/g;Math.abs(y-1)>pt&&this._append`L${n+y*f},${e+y*h}`,this._append`A${o},${o},0,0,${+(h*d>f*p)},${this._x1=n+w*u},${this._y1=e+w*l}`}}arc(n,e,r,i,o,a){if(n=+n,e=+e,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),u=r*Math.sin(i),l=n+s,f=e+u,h=1^a,c=a?i-o:o-i;this._x1===null?this._append`M${l},${f}`:(Math.abs(this._x1-l)>pt||Math.abs(this._y1-f)>pt)&&this._append`L${l},${f}`,r&&(c<0&&(c=c%ye+ye),c>sl?this._append`A${r},${r},0,1,${h},${n-s},${e-u}A${r},${r},0,1,${h},${this._x1=l},${this._y1=f}`:c>pt&&this._append`A${r},${r},0,${+(c>=ge)},${h},${this._x1=n+r*Math.cos(o)},${this._y1=e+r*Math.sin(o)}`)}rect(n,e,r,i){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+e}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Z(){return new Dr}Z.prototype=Dr.prototype;function ll(t){const n=+this._x.call(null,t),e=+this._y.call(null,t);return Hr(this.cover(n,e),n,e,t)}function Hr(t,n,e,r){if(isNaN(n)||isNaN(e))return t;var i,o=t._root,a={data:r},s=t._x0,u=t._y0,l=t._x1,f=t._y1,h,c,d,p,m,_,g,v;if(!o)return t._root=a,t;for(;o.length;)if((m=n>=(h=(s+l)/2))?s=h:l=h,(_=e>=(c=(u+f)/2))?u=c:f=c,i=o,!(o=o[g=_<<1|m]))return i[g]=a,t;if(d=+t._x.call(null,o.data),p=+t._y.call(null,o.data),n===d&&e===p)return a.next=o,i?i[g]=a:t._root=a,t;do i=i?i[g]=new Array(4):t._root=new Array(4),(m=n>=(h=(s+l)/2))?s=h:l=h,(_=e>=(c=(u+f)/2))?u=c:f=c;while((g=_<<1|m)===(v=(p>=c)<<1|d>=h));return i[v]=o,i[g]=a,t}function fl(t){var n,e,r=t.length,i,o,a=new Array(r),s=new Array(r),u=1/0,l=1/0,f=-1/0,h=-1/0;for(e=0;e<r;++e)isNaN(i=+this._x.call(null,n=t[e]))||isNaN(o=+this._y.call(null,n))||(a[e]=i,s[e]=o,i<u&&(u=i),i>f&&(f=i),o<l&&(l=o),o>h&&(h=o));if(u>f||l>h)return this;for(this.cover(u,l).cover(f,h),e=0;e<r;++e)Hr(this,a[e],s[e],t[e]);return this}function cl(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(e))i=(e=Math.floor(t))+1,o=(r=Math.floor(n))+1;else{for(var a=i-e||1,s=this._root,u,l;e>t||t>=i||r>n||n>=o;)switch(l=(n<r)<<1|t<e,u=new Array(4),u[l]=s,s=u,a*=2,l){case 0:i=e+a,o=r+a;break;case 1:e=i-a,o=r+a;break;case 2:i=e+a,r=o-a;break;case 3:e=i-a,r=o-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=e,this._y0=r,this._x1=i,this._y1=o,this}function hl(){var t=[];return this.visit(function(n){if(!n.length)do t.push(n.data);while(n=n.next)}),t}function dl(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function R(t,n,e,r,i){this.node=t,this.x0=n,this.y0=e,this.x1=r,this.y1=i}function pl(t,n,e){var r,i=this._x0,o=this._y0,a,s,u,l,f=this._x1,h=this._y1,c=[],d=this._root,p,m;for(d&&c.push(new R(d,i,o,f,h)),e==null?e=1/0:(i=t-e,o=n-e,f=t+e,h=n+e,e*=e);p=c.pop();)if(!(!(d=p.node)||(a=p.x0)>f||(s=p.y0)>h||(u=p.x1)<i||(l=p.y1)<o))if(d.length){var _=(a+u)/2,g=(s+l)/2;c.push(new R(d[3],_,g,u,l),new R(d[2],a,g,_,l),new R(d[1],_,s,u,g),new R(d[0],a,s,_,g)),(m=(n>=g)<<1|t>=_)&&(p=c[c.length-1],c[c.length-1]=c[c.length-1-m],c[c.length-1-m]=p)}else{var v=t-+this._x.call(null,d.data),x=n-+this._y.call(null,d.data),y=v*v+x*x;if(y<e){var w=Math.sqrt(e=y);i=t-w,o=n-w,f=t+w,h=n+w,r=d.data}}return r}function gl(t){if(isNaN(f=+this._x.call(null,t))||isNaN(h=+this._y.call(null,t)))return this;var n,e=this._root,r,i,o,a=this._x0,s=this._y0,u=this._x1,l=this._y1,f,h,c,d,p,m,_,g;if(!e)return this;if(e.length)for(;;){if((p=f>=(c=(a+u)/2))?a=c:u=c,(m=h>=(d=(s+l)/2))?s=d:l=d,n=e,!(e=e[_=m<<1|p]))return this;if(!e.length)break;(n[_+1&3]||n[_+2&3]||n[_+3&3])&&(r=n,g=_)}for(;e.data!==t;)if(i=e,!(e=e.next))return this;return(o=e.next)&&delete e.next,i?(o?i.next=o:delete i.next,this):n?(o?n[_]=o:delete n[_],(e=n[0]||n[1]||n[2]||n[3])&&e===(n[3]||n[2]||n[1]||n[0])&&!e.length&&(r?r[g]=e:this._root=e),this):(this._root=o,this)}function yl(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this}function _l(){return this._root}function ml(){var t=0;return this.visit(function(n){if(!n.length)do++t;while(n=n.next)}),t}function vl(t){var n=[],e,r=this._root,i,o,a,s,u;for(r&&n.push(new R(r,this._x0,this._y0,this._x1,this._y1));e=n.pop();)if(!t(r=e.node,o=e.x0,a=e.y0,s=e.x1,u=e.y1)&&r.length){var l=(o+s)/2,f=(a+u)/2;(i=r[3])&&n.push(new R(i,l,f,s,u)),(i=r[2])&&n.push(new R(i,o,f,l,u)),(i=r[1])&&n.push(new R(i,l,a,s,f)),(i=r[0])&&n.push(new R(i,o,a,l,f))}return this}function wl(t){var n=[],e=[],r;for(this._root&&n.push(new R(this._root,this._x0,this._y0,this._x1,this._y1));r=n.pop();){var i=r.node;if(i.length){var o,a=r.x0,s=r.y0,u=r.x1,l=r.y1,f=(a+u)/2,h=(s+l)/2;(o=i[0])&&n.push(new R(o,a,s,f,h)),(o=i[1])&&n.push(new R(o,f,s,u,h)),(o=i[2])&&n.push(new R(o,a,h,f,l)),(o=i[3])&&n.push(new R(o,f,h,u,l))}e.push(r)}for(;r=e.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function xl(t){return t[0]}function bl(t){return arguments.length?(this._x=t,this):this._x}function Ml(t){return t[1]}function $l(t){return arguments.length?(this._y=t,this):this._y}function qr(t,n,e){var r=new _e(n??xl,e??Ml,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function _e(t,n,e,r,i,o){this._x=t,this._y=n,this._x0=e,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Br(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}var F=qr.prototype=_e.prototype;F.copy=function(){var t=new _e(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,e,r;if(!n)return t;if(!n.length)return t._root=Br(n),t;for(e=[{source:n,target:t._root=new Array(4)}];n=e.pop();)for(var i=0;i<4;++i)(r=n.source[i])&&(r.length?e.push({source:r,target:n.target[i]=new Array(4)}):n.target[i]=Br(r));return t},F.add=ll,F.addAll=fl,F.cover=cl,F.data=hl,F.extent=dl,F.find=pl,F.remove=gl,F.removeAll=yl,F.root=_l,F.size=ml,F.visit=vl,F.visitAfter=wl,F.x=bl,F.y=$l;function H(t){return function(){return t}}function Nt(t){return(t()-.5)*1e-6}function Al(t){return t.index}function Xr(t,n){var e=t.get(n);if(!e)throw new Error("node not found: "+n);return e}function Tl(t){var n=Al,e=h,r,i=H(30),o,a,s,u,l,f=1;t==null&&(t=[]);function h(_){return 1/Math.min(s[_.source.index],s[_.target.index])}function c(_){for(var g=0,v=t.length;g<f;++g)for(var x=0,y,w,$,A,T,S,P;x<v;++x)y=t[x],w=y.source,$=y.target,A=$.x+$.vx-w.x-w.vx||Nt(l),T=$.y+$.vy-w.y-w.vy||Nt(l),S=Math.sqrt(A*A+T*T),S=(S-o[x])/S*_*r[x],A*=S,T*=S,$.vx-=A*(P=u[x]),$.vy-=T*P,w.vx+=A*(P=1-P),w.vy+=T*P}function d(){if(a){var _,g=a.length,v=t.length,x=new Map(a.map((w,$)=>[n(w,$,a),w])),y;for(_=0,s=new Array(g);_<v;++_)y=t[_],y.index=_,typeof y.source!="object"&&(y.source=Xr(x,y.source)),typeof y.target!="object"&&(y.target=Xr(x,y.target)),s[y.source.index]=(s[y.source.index]||0)+1,s[y.target.index]=(s[y.target.index]||0)+1;for(_=0,u=new Array(v);_<v;++_)y=t[_],u[_]=s[y.source.index]/(s[y.source.index]+s[y.target.index]);r=new Array(v),p(),o=new Array(v),m()}}function p(){if(a)for(var _=0,g=t.length;_<g;++_)r[_]=+e(t[_],_,t)}function m(){if(a)for(var _=0,g=t.length;_<g;++_)o[_]=+i(t[_],_,t)}return c.initialize=function(_,g){a=_,l=g,d()},c.links=function(_){return arguments.length?(t=_,d(),c):t},c.id=function(_){return arguments.length?(n=_,c):n},c.iterations=function(_){return arguments.length?(f=+_,c):f},c.strength=function(_){return arguments.length?(e=typeof _=="function"?_:H(+_),p(),c):e},c.distance=function(_){return arguments.length?(i=typeof _=="function"?_:H(+_),m(),c):i},c}const Nl=1664525,Sl=1013904223,Gr=4294967296;function Pl(){let t=1;return()=>(t=(Nl*t+Sl)%Gr)/Gr}function El(t){return t.x}function kl(t){return t.y}var zl=10,Il=Math.PI*(3-Math.sqrt(5));function Ol(t){var n,e=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,u=le(h),l=en("tick","end"),f=Pl();t==null&&(t=[]);function h(){c(),l.call("tick",n),e<r&&(u.stop(),l.call("end",n))}function c(m){var _,g=t.length,v;m===void 0&&(m=1);for(var x=0;x<m;++x)for(e+=(o-e)*i,s.forEach(function(y){y(e)}),_=0;_<g;++_)v=t[_],v.fx==null?v.x+=v.vx*=a:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=a:(v.y=v.fy,v.vy=0);return n}function d(){for(var m=0,_=t.length,g;m<_;++m){if(g=t[m],g.index=m,g.fx!=null&&(g.x=g.fx),g.fy!=null&&(g.y=g.fy),isNaN(g.x)||isNaN(g.y)){var v=zl*Math.sqrt(.5+m),x=m*Il;g.x=v*Math.cos(x),g.y=v*Math.sin(x)}(isNaN(g.vx)||isNaN(g.vy))&&(g.vx=g.vy=0)}}function p(m){return m.initialize&&m.initialize(t,f),m}return d(),n={tick:c,restart:function(){return u.restart(h),n},stop:function(){return u.stop(),n},nodes:function(m){return arguments.length?(t=m,d(),s.forEach(p),n):t},alpha:function(m){return arguments.length?(e=+m,n):e},alphaMin:function(m){return arguments.length?(r=+m,n):r},alphaDecay:function(m){return arguments.length?(i=+m,n):+i},alphaTarget:function(m){return arguments.length?(o=+m,n):o},velocityDecay:function(m){return arguments.length?(a=1-m,n):1-a},randomSource:function(m){return arguments.length?(f=m,s.forEach(p),n):f},force:function(m,_){return arguments.length>1?(_==null?s.delete(m):s.set(m,p(_)),n):s.get(m)},find:function(m,_,g){var v=0,x=t.length,y,w,$,A,T;for(g==null?g=1/0:g*=g,v=0;v<x;++v)A=t[v],y=m-A.x,w=_-A.y,$=y*y+w*w,$<g&&(T=A,g=$);return T},on:function(m,_){return arguments.length>1?(l.on(m,_),n):l.on(m)}}}function Cl(){var t,n,e,r,i=H(-30),o,a=1,s=1/0,u=.81;function l(d){var p,m=t.length,_=qr(t,El,kl).visitAfter(h);for(r=d,p=0;p<m;++p)n=t[p],_.visit(c)}function f(){if(t){var d,p=t.length,m;for(o=new Array(p),d=0;d<p;++d)m=t[d],o[m.index]=+i(m,d,t)}}function h(d){var p=0,m,_,g=0,v,x,y;if(d.length){for(v=x=y=0;y<4;++y)(m=d[y])&&(_=Math.abs(m.value))&&(p+=m.value,g+=_,v+=_*m.x,x+=_*m.y);d.x=v/g,d.y=x/g}else{m=d,m.x=m.data.x,m.y=m.data.y;do p+=o[m.data.index];while(m=m.next)}d.value=p}function c(d,p,m,_){if(!d.value)return!0;var g=d.x-n.x,v=d.y-n.y,x=_-p,y=g*g+v*v;if(x*x/u<y)return y<s&&(g===0&&(g=Nt(e),y+=g*g),v===0&&(v=Nt(e),y+=v*v),y<a&&(y=Math.sqrt(a*y)),n.vx+=g*d.value*r/y,n.vy+=v*d.value*r/y),!0;if(d.length||y>=s)return;(d.data!==n||d.next)&&(g===0&&(g=Nt(e),y+=g*g),v===0&&(v=Nt(e),y+=v*v),y<a&&(y=Math.sqrt(a*y)));do d.data!==n&&(x=o[d.data.index]*r/y,n.vx+=g*x,n.vy+=v*x);while(d=d.next)}return l.initialize=function(d,p){t=d,e=p,f()},l.strength=function(d){return arguments.length?(i=typeof d=="function"?d:H(+d),f(),l):i},l.distanceMin=function(d){return arguments.length?(a=d*d,l):Math.sqrt(a)},l.distanceMax=function(d){return arguments.length?(s=d*d,l):Math.sqrt(s)},l.theta=function(d){return arguments.length?(u=d*d,l):Math.sqrt(u)},l}function Rl(t){var n=H(.1),e,r,i;typeof t!="function"&&(t=H(t==null?0:+t));function o(s){for(var u=0,l=e.length,f;u<l;++u)f=e[u],f.vx+=(i[u]-f.x)*r[u]*s}function a(){if(e){var s,u=e.length;for(r=new Array(u),i=new Array(u),s=0;s<u;++s)r[s]=isNaN(i[s]=+t(e[s],s,e))?0:+n(e[s],s,e)}}return o.initialize=function(s){e=s,a()},o.strength=function(s){return arguments.length?(n=typeof s=="function"?s:H(+s),a(),o):n},o.x=function(s){return arguments.length?(t=typeof s=="function"?s:H(+s),a(),o):t},o}function Fl(t){var n=H(.1),e,r,i;typeof t!="function"&&(t=H(t==null?0:+t));function o(s){for(var u=0,l=e.length,f;u<l;++u)f=e[u],f.vy+=(i[u]-f.y)*r[u]*s}function a(){if(e){var s,u=e.length;for(r=new Array(u),i=new Array(u),s=0;s<u;++s)r[s]=isNaN(i[s]=+t(e[s],s,e))?0:+n(e[s],s,e)}}return o.initialize=function(s){e=s,a()},o.strength=function(s){return arguments.length?(n=typeof s=="function"?s:H(+s),a(),o):n},o.y=function(s){return arguments.length?(t=typeof s=="function"?s:H(+s),a(),o):t},o}function Ll(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function xn(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function St(t){return t=xn(Math.abs(t)),t?t[1]:NaN}function Dl(t,n){return function(e,r){for(var i=e.length,o=[],a=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(e.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}}function Hl(t){return function(n){return n.replace(/[0-9]/g,function(e){return t[+e]})}}var ql=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function bn(t){if(!(n=ql.exec(t)))throw new Error("invalid format: "+t);var n;return new me({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}bn.prototype=me.prototype;function me(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}me.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Bl(t){t:for(var n=t.length,e=1,r=-1,i;e<n;++e)switch(t[e]){case".":r=i=e;break;case"0":r===0&&(r=e),i=e;break;default:if(!+t[e])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Ur;function Xl(t,n){var e=xn(t,n);if(!e)return t+"";var r=e[0],i=e[1],o=i-(Ur=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+xn(t,Math.max(0,n+o-1))[0]}function Yr(t,n){var e=xn(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Vr={"%":(t,n)=>(t*100).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Ll,e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>Yr(t*100,n),r:Yr,s:Xl,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Kr(t){return t}var Zr=Array.prototype.map,Wr=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Gl(t){var n=t.grouping===void 0||t.thousands===void 0?Kr:Dl(Zr.call(t.grouping,Number),t.thousands+""),e=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?Kr:Hl(Zr.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"−":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function l(h){h=bn(h);var c=h.fill,d=h.align,p=h.sign,m=h.symbol,_=h.zero,g=h.width,v=h.comma,x=h.precision,y=h.trim,w=h.type;w==="n"?(v=!0,w="g"):Vr[w]||(x===void 0&&(x=12),y=!0,w="g"),(_||c==="0"&&d==="=")&&(_=!0,c="0",d="=");var $=m==="$"?e:m==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",A=m==="$"?r:/[%p]/.test(w)?a:"",T=Vr[w],S=/[defgprs%]/.test(w);x=x===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function P(b){var z=$,E=A,W,Gn,lt;if(w==="c")E=T(b)+E,b="";else{b=+b;var xt=b<0||1/b<0;if(b=isNaN(b)?u:T(Math.abs(b),x),y&&(b=Bl(b)),xt&&+b==0&&p!=="+"&&(xt=!1),z=(xt?p==="("?p:s:p==="-"||p==="("?"":p)+z,E=(w==="s"?Wr[8+Ur/3]:"")+E+(xt&&p==="("?")":""),S){for(W=-1,Gn=b.length;++W<Gn;)if(lt=b.charCodeAt(W),48>lt||lt>57){E=(lt===46?i+b.slice(W+1):b.slice(W))+E,b=b.slice(0,W);break}}}v&&!_&&(b=n(b,1/0));var It=z.length+b.length+E.length,U=It<g?new Array(g-It+1).join(c):"";switch(v&&_&&(b=n(U+b,U.length?g-E.length:1/0),U=""),d){case"<":b=z+b+E+U;break;case"=":b=z+U+b+E;break;case"^":b=U.slice(0,It=U.length>>1)+z+b+E+U.slice(It);break;default:b=U+z+b+E;break}return o(b)}return P.toString=function(){return h+""},P}function f(h,c){var d=l((h=bn(h),h.type="f",h)),p=Math.max(-8,Math.min(8,Math.floor(St(c)/3)))*3,m=Math.pow(10,-p),_=Wr[8+p/3];return function(g){return d(m*g)+_}}return{format:l,formatPrefix:f}}var Mn,$n,Jr;Ul({thousands:",",grouping:[3],currency:["$",""]});function Ul(t){return Mn=Gl(t),$n=Mn.format,Jr=Mn.formatPrefix,Mn}function Yl(t){return Math.max(0,-St(Math.abs(t)))}function Vl(t,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(St(n)/3)))*3-St(Math.abs(t)))}function Kl(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,St(n)-St(t))+1}function Zl(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t);break}return this}function Wl(t){return function(){return t}}function Jl(t){return+t}var Qr=[0,1];function Pt(t){return t}function ve(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:Wl(isNaN(n)?NaN:.5)}function Ql(t,n){var e;return t>n&&(e=t,t=n,n=e),function(r){return Math.max(t,Math.min(n,r))}}function jl(t,n,e){var r=t[0],i=t[1],o=n[0],a=n[1];return i<r?(r=ve(i,r),o=e(a,o)):(r=ve(r,i),o=e(o,a)),function(s){return o(r(s))}}function tf(t,n,e){var r=Math.min(t.length,n.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++a<r;)i[a]=ve(t[a],t[a+1]),o[a]=e(n[a],n[a+1]);return function(s){var u=yo(t,s,1,r)-1;return o[u](i[u](s))}}function nf(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ef(){var t=Qr,n=Qr,e=se,r,i,o,a=Pt,s,u,l;function f(){var c=Math.min(t.length,n.length);return a!==Pt&&(a=Ql(t[0],t[c-1])),s=c>2?tf:jl,u=l=null,h}function h(c){return c==null||isNaN(c=+c)?o:(u||(u=s(t.map(r),n,e)))(r(a(c)))}return h.invert=function(c){return a(i((l||(l=s(n,t.map(r),V)))(c)))},h.domain=function(c){return arguments.length?(t=Array.from(c,Jl),f()):t.slice()},h.range=function(c){return arguments.length?(n=Array.from(c),f()):n.slice()},h.rangeRound=function(c){return n=Array.from(c),e=Xs,f()},h.clamp=function(c){return arguments.length?(a=c?!0:Pt,f()):a!==Pt},h.interpolate=function(c){return arguments.length?(e=c,f()):e},h.unknown=function(c){return arguments.length?(o=c,h):o},function(c,d){return r=c,i=d,f()}}function rf(){return ef()(Pt,Pt)}function of(t,n,e,r){var i=bo(t,n,e),o;switch(r=bn(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(n));return r.precision==null&&!isNaN(o=Vl(i,a))&&(r.precision=o),Jr(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Kl(i,Math.max(Math.abs(t),Math.abs(n))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Yl(i))&&(r.precision=o-(r.type==="%")*2);break}}return $n(r)}function af(t){var n=t.domain;return t.ticks=function(e){var r=n();return xo(r[0],r[r.length-1],e??10)},t.tickFormat=function(e,r){var i=n();return of(i[0],i[i.length-1],e??10,r)},t.nice=function(e){e==null&&(e=10);var r=n(),i=0,o=r.length-1,a=r[i],s=r[o],u,l,f=10;for(s<a&&(l=a,a=s,s=l,l=i,i=o,o=l);f-- >0;){if(l=Un(a,s,e),l===u)return r[i]=a,r[o]=s,n(r);if(l>0)a=Math.floor(a/l)*l,s=Math.ceil(s/l)*l;else if(l<0)a=Math.ceil(a*l)/l,s=Math.floor(s*l)/l;else break;u=l}return t},t}function q(){var t=rf();return t.copy=function(){return nf(t,q())},Zl.apply(t,arguments),af(t)}function sf(t){for(var n=t.length/6|0,e=new Array(n),r=0;r<n;)e[r]="#"+t.slice(r*6,++r*6);return e}const jr=sf("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function Ut(t,n,e){this.k=t,this.x=n,this.y=e}Ut.prototype={constructor:Ut,scale:function(t){return t===1?this:new Ut(this.k*t,this.x,this.y)},translate:function(t,n){return t===0&n===0?this:new Ut(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},Ut.prototype;var ti=typeof global=="object"&&global&&global.Object===Object&&global,uf=typeof self=="object"&&self&&self.Object===Object&&self,et=ti||uf||Function("return this")(),j=et.Symbol,ni=Object.prototype,lf=ni.hasOwnProperty,ff=ni.toString,Yt=j?j.toStringTag:void 0;function cf(t){var n=lf.call(t,Yt),e=t[Yt];try{t[Yt]=void 0;var r=!0}catch{}var i=ff.call(t);return r&&(n?t[Yt]=e:delete t[Yt]),i}var hf=Object.prototype,df=hf.toString;function pf(t){return df.call(t)}var gf="[object Null]",yf="[object Undefined]",ei=j?j.toStringTag:void 0;function Et(t){return t==null?t===void 0?yf:gf:ei&&ei in Object(t)?cf(t):pf(t)}function kt(t){return t!=null&&typeof t=="object"}var _f="[object Symbol]";function An(t){return typeof t=="symbol"||kt(t)&&Et(t)==_f}function Tn(t,n){for(var e=-1,r=t==null?0:t.length,i=Array(r);++e<r;)i[e]=n(t[e],e,t);return i}var B=Array.isArray,ri=j?j.prototype:void 0,ii=ri?ri.toString:void 0;function oi(t){if(typeof t=="string")return t;if(B(t))return Tn(t,oi)+"";if(An(t))return ii?ii.call(t):"";var n=t+"";return n=="0"&&1/t==-1/0?"-0":n}var mf=/\s/;function vf(t){for(var n=t.length;n--&&mf.test(t.charAt(n)););return n}var wf=/^\s+/;function xf(t){return t&&t.slice(0,vf(t)+1).replace(wf,"")}function rt(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}var ai=NaN,bf=/^[-+]0x[0-9a-f]+$/i,Mf=/^0b[01]+$/i,$f=/^0o[0-7]+$/i,Af=parseInt;function Tf(t){if(typeof t=="number")return t;if(An(t))return ai;if(rt(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=rt(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=xf(t);var e=Mf.test(t);return e||$f.test(t)?Af(t.slice(2),e?2:8):bf.test(t)?ai:+t}var Nf=1/0,Sf=17976931348623157e292;function we(t){if(!t)return t===0?t:0;if(t=Tf(t),t===Nf||t===-1/0){var n=t<0?-1:1;return n*Sf}return t===t?t:0}function si(t){return t}var Pf="[object AsyncFunction]",Ef="[object Function]",kf="[object GeneratorFunction]",zf="[object Proxy]";function ui(t){if(!rt(t))return!1;var n=Et(t);return n==Ef||n==kf||n==Pf||n==zf}var xe=et["__core-js_shared__"],li=function(){var t=/[^.]+$/.exec(xe&&xe.keys&&xe.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function If(t){return!!li&&li in t}var Of=Function.prototype,Cf=Of.toString;function gt(t){if(t!=null){try{return Cf.call(t)}catch{}try{return t+""}catch{}}return""}var Rf=/[\\^$.*+?()[\]{}|]/g,Ff=/^\[object .+?Constructor\]$/,Lf=Function.prototype,Df=Object.prototype,Hf=Lf.toString,qf=Df.hasOwnProperty,Bf=RegExp("^"+Hf.call(qf).replace(Rf,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Xf(t){if(!rt(t)||If(t))return!1;var n=ui(t)?Bf:Ff;return n.test(gt(t))}function Gf(t,n){return t==null?void 0:t[n]}function yt(t,n){var e=Gf(t,n);return Xf(e)?e:void 0}var be=yt(et,"WeakMap"),fi=function(){try{var t=yt(Object,"defineProperty");return t({},"",{}),t}catch{}}();function Uf(t,n){for(var e=-1,r=t==null?0:t.length;++e<r&&n(t[e],e,t)!==!1;);return t}var Yf=9007199254740991,Vf=/^(?:0|[1-9]\d*)$/;function Nn(t,n){var e=typeof t;return n=n??Yf,!!n&&(e=="number"||e!="symbol"&&Vf.test(t))&&t>-1&&t%1==0&&t<n}function Kf(t,n,e){n=="__proto__"&&fi?fi(t,n,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[n]=e}function Sn(t,n){return t===n||t!==t&&n!==n}var Zf=Object.prototype,Wf=Zf.hasOwnProperty;function Jf(t,n,e){var r=t[n];(!(Wf.call(t,n)&&Sn(r,e))||e===void 0&&!(n in t))&&Kf(t,n,e)}var Qf=9007199254740991;function Me(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Qf}function Vt(t){return t!=null&&Me(t.length)&&!ui(t)}function jf(t,n,e){if(!rt(e))return!1;var r=typeof n;return(r=="number"?Vt(e)&&Nn(n,e.length):r=="string"&&n in e)?Sn(e[n],t):!1}var tc=Object.prototype;function ci(t){var n=t&&t.constructor,e=typeof n=="function"&&n.prototype||tc;return t===e}function nc(t,n){for(var e=-1,r=Array(t);++e<t;)r[e]=n(e);return r}var ec="[object Arguments]";function hi(t){return kt(t)&&Et(t)==ec}var di=Object.prototype,rc=di.hasOwnProperty,ic=di.propertyIsEnumerable,$e=hi(function(){return arguments}())?hi:function(t){return kt(t)&&rc.call(t,"callee")&&!ic.call(t,"callee")};function oc(){return!1}var pi=typeof C=="object"&&C&&!C.nodeType&&C,gi=pi&&typeof module=="object"&&module&&!module.nodeType&&module,ac=gi&&gi.exports===pi,yi=ac?et.Buffer:void 0,sc=yi?yi.isBuffer:void 0,Ae=sc||oc,uc="[object Arguments]",lc="[object Array]",fc="[object Boolean]",cc="[object Date]",hc="[object Error]",dc="[object Function]",pc="[object Map]",gc="[object Number]",yc="[object Object]",_c="[object RegExp]",mc="[object Set]",vc="[object String]",wc="[object WeakMap]",xc="[object ArrayBuffer]",bc="[object DataView]",Mc="[object Float32Array]",$c="[object Float64Array]",Ac="[object Int8Array]",Tc="[object Int16Array]",Nc="[object Int32Array]",Sc="[object Uint8Array]",Pc="[object Uint8ClampedArray]",Ec="[object Uint16Array]",kc="[object Uint32Array]",N={};N[Mc]=N[$c]=N[Ac]=N[Tc]=N[Nc]=N[Sc]=N[Pc]=N[Ec]=N[kc]=!0,N[uc]=N[lc]=N[xc]=N[fc]=N[bc]=N[cc]=N[hc]=N[dc]=N[pc]=N[gc]=N[yc]=N[_c]=N[mc]=N[vc]=N[wc]=!1;function zc(t){return kt(t)&&Me(t.length)&&!!N[Et(t)]}function Ic(t){return function(n){return t(n)}}var _i=typeof C=="object"&&C&&!C.nodeType&&C,Kt=_i&&typeof module=="object"&&module&&!module.nodeType&&module,Oc=Kt&&Kt.exports===_i,Te=Oc&&ti.process,mi=function(){try{var t=Kt&&Kt.require&&Kt.require("util").types;return t||Te&&Te.binding&&Te.binding("util")}catch{}}(),vi=mi&&mi.isTypedArray,wi=vi?Ic(vi):zc,Cc=Object.prototype,Rc=Cc.hasOwnProperty;function xi(t,n){var e=B(t),r=!e&&$e(t),i=!e&&!r&&Ae(t),o=!e&&!r&&!i&&wi(t),a=e||r||i||o,s=a?nc(t.length,String):[],u=s.length;for(var l in t)(n||Rc.call(t,l))&&!(a&&(l=="length"||i&&(l=="offset"||l=="parent")||o&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||Nn(l,u)))&&s.push(l);return s}function bi(t,n){return function(e){return t(n(e))}}var Fc=bi(Object.keys,Object),Lc=Object.prototype,Dc=Lc.hasOwnProperty;function Hc(t){if(!ci(t))return Fc(t);var n=[];for(var e in Object(t))Dc.call(t,e)&&e!="constructor"&&n.push(e);return n}function Pn(t){return Vt(t)?xi(t):Hc(t)}function qc(t){var n=[];if(t!=null)for(var e in Object(t))n.push(e);return n}var Bc=Object.prototype,Xc=Bc.hasOwnProperty;function Gc(t){if(!rt(t))return qc(t);var n=ci(t),e=[];for(var r in t)r=="constructor"&&(n||!Xc.call(t,r))||e.push(r);return e}function Uc(t){return Vt(t)?xi(t,!0):Gc(t)}var Yc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Vc=/^\w*$/;function Ne(t,n){if(B(t))return!1;var e=typeof t;return e=="number"||e=="symbol"||e=="boolean"||t==null||An(t)?!0:Vc.test(t)||!Yc.test(t)||n!=null&&t in Object(n)}var Zt=yt(Object,"create");function Kc(){this.__data__=Zt?Zt(null):{},this.size=0}function Zc(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}var Wc="__lodash_hash_undefined__",Jc=Object.prototype,Qc=Jc.hasOwnProperty;function jc(t){var n=this.__data__;if(Zt){var e=n[t];return e===Wc?void 0:e}return Qc.call(n,t)?n[t]:void 0}var th=Object.prototype,nh=th.hasOwnProperty;function eh(t){var n=this.__data__;return Zt?n[t]!==void 0:nh.call(n,t)}var rh="__lodash_hash_undefined__";function ih(t,n){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=Zt&&n===void 0?rh:n,this}function _t(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}_t.prototype.clear=Kc,_t.prototype.delete=Zc,_t.prototype.get=jc,_t.prototype.has=eh,_t.prototype.set=ih;function oh(){this.__data__=[],this.size=0}function En(t,n){for(var e=t.length;e--;)if(Sn(t[e][0],n))return e;return-1}var ah=Array.prototype,sh=ah.splice;function uh(t){var n=this.__data__,e=En(n,t);if(e<0)return!1;var r=n.length-1;return e==r?n.pop():sh.call(n,e,1),--this.size,!0}function lh(t){var n=this.__data__,e=En(n,t);return e<0?void 0:n[e][1]}function fh(t){return En(this.__data__,t)>-1}function ch(t,n){var e=this.__data__,r=En(e,t);return r<0?(++this.size,e.push([t,n])):e[r][1]=n,this}function it(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}it.prototype.clear=oh,it.prototype.delete=uh,it.prototype.get=lh,it.prototype.has=fh,it.prototype.set=ch;var Wt=yt(et,"Map");function hh(){this.size=0,this.__data__={hash:new _t,map:new(Wt||it),string:new _t}}function dh(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}function kn(t,n){var e=t.__data__;return dh(n)?e[typeof n=="string"?"string":"hash"]:e.map}function ph(t){var n=kn(this,t).delete(t);return this.size-=n?1:0,n}function gh(t){return kn(this,t).get(t)}function yh(t){return kn(this,t).has(t)}function _h(t,n){var e=kn(this,t),r=e.size;return e.set(t,n),this.size+=e.size==r?0:1,this}function ot(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}ot.prototype.clear=hh,ot.prototype.delete=ph,ot.prototype.get=gh,ot.prototype.has=yh,ot.prototype.set=_h;var mh="Expected a function";function Se(t,n){if(typeof t!="function"||n!=null&&typeof n!="function")throw new TypeError(mh);var e=function(){var r=arguments,i=n?n.apply(this,r):r[0],o=e.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return e.cache=o.set(i,a)||o,a};return e.cache=new(Se.Cache||ot),e}Se.Cache=ot;var vh=500;function wh(t){var n=Se(t,function(r){return e.size===vh&&e.clear(),r}),e=n.cache;return n}var xh=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,bh=/\\(\\)?/g,Mh=wh(function(t){var n=[];return t.charCodeAt(0)===46&&n.push(""),t.replace(xh,function(e,r,i,o){n.push(i?o.replace(bh,"$1"):r||e)}),n});function zn(t){return t==null?"":oi(t)}function In(t,n){return B(t)?t:Ne(t,n)?[t]:Mh(zn(t))}function Jt(t){if(typeof t=="string"||An(t))return t;var n=t+"";return n=="0"&&1/t==-1/0?"-0":n}function Pe(t,n){n=In(n,t);for(var e=0,r=n.length;t!=null&&e<r;)t=t[Jt(n[e++])];return e&&e==r?t:void 0}function $h(t,n,e){var r=t==null?void 0:Pe(t,n);return r===void 0?e:r}function Ee(t,n){for(var e=-1,r=n.length,i=t.length;++e<r;)t[i+e]=n[e];return t}var Mi=j?j.isConcatSpreadable:void 0;function Ah(t){return B(t)||$e(t)||!!(Mi&&t&&t[Mi])}function Th(t,n,e,r,i){var o=-1,a=t.length;for(e||(e=Ah),i||(i=[]);++o<a;){var s=t[o];e(s)?Ee(i,s):i[i.length]=s}return i}function Nh(t){var n=t==null?0:t.length;return n?Th(t):[]}var Sh=bi(Object.getPrototypeOf,Object);function Ph(t,n,e){var r=-1,i=t.length;n<0&&(n=-n>i?0:i+n),e=e>i?i:e,e<0&&(e+=i),i=n>e?0:e-n>>>0,n>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+n];return o}function Eh(t,n,e){var r=t.length;return e=e===void 0?r:e,Ph(t,n,e)}var kh="\\ud800-\\udfff",zh="\\u0300-\\u036f",Ih="\\ufe20-\\ufe2f",Oh="\\u20d0-\\u20ff",Ch=zh+Ih+Oh,Rh="\\ufe0e\\ufe0f",Fh="\\u200d",Lh=RegExp("["+Fh+kh+Ch+Rh+"]");function $i(t){return Lh.test(t)}function Dh(t){return t.split("")}var Ai="\\ud800-\\udfff",Hh="\\u0300-\\u036f",qh="\\ufe20-\\ufe2f",Bh="\\u20d0-\\u20ff",Xh=Hh+qh+Bh,Gh="\\ufe0e\\ufe0f",Uh="["+Ai+"]",ke="["+Xh+"]",ze="\\ud83c[\\udffb-\\udfff]",Yh="(?:"+ke+"|"+ze+")",Ti="[^"+Ai+"]",Ni="(?:\\ud83c[\\udde6-\\uddff]){2}",Si="[\\ud800-\\udbff][\\udc00-\\udfff]",Vh="\\u200d",Pi=Yh+"?",Ei="["+Gh+"]?",Kh="(?:"+Vh+"(?:"+[Ti,Ni,Si].join("|")+")"+Ei+Pi+")*",Zh=Ei+Pi+Kh,Wh="(?:"+[Ti+ke+"?",ke,Ni,Si,Uh].join("|")+")",Jh=RegExp(ze+"(?="+ze+")|"+Wh+Zh,"g");function Qh(t){return t.match(Jh)||[]}function jh(t){return $i(t)?Qh(t):Dh(t)}function td(t){return function(n){n=zn(n);var e=$i(n)?jh(n):void 0,r=e?e[0]:n.charAt(0),i=e?Eh(e,1).join(""):n.slice(1);return r[t]()+i}}var nd=td("toUpperCase");function ed(t){return nd(zn(t).toLowerCase())}function rd(){this.__data__=new it,this.size=0}function id(t){var n=this.__data__,e=n.delete(t);return this.size=n.size,e}function od(t){return this.__data__.get(t)}function ad(t){return this.__data__.has(t)}var sd=200;function ud(t,n){var e=this.__data__;if(e instanceof it){var r=e.__data__;if(!Wt||r.length<sd-1)return r.push([t,n]),this.size=++e.size,this;e=this.__data__=new ot(r)}return e.set(t,n),this.size=e.size,this}function at(t){var n=this.__data__=new it(t);this.size=n.size}at.prototype.clear=rd,at.prototype.delete=id,at.prototype.get=od,at.prototype.has=ad,at.prototype.set=ud;function ki(t,n){for(var e=-1,r=t==null?0:t.length,i=0,o=[];++e<r;){var a=t[e];n(a,e,t)&&(o[i++]=a)}return o}function zi(){return[]}var ld=Object.prototype,fd=ld.propertyIsEnumerable,Ii=Object.getOwnPropertySymbols,Oi=Ii?function(t){return t==null?[]:(t=Object(t),ki(Ii(t),function(n){return fd.call(t,n)}))}:zi,cd=Object.getOwnPropertySymbols,hd=cd?function(t){for(var n=[];t;)Ee(n,Oi(t)),t=Sh(t);return n}:zi;function Ci(t,n,e){var r=n(t);return B(t)?r:Ee(r,e(t))}function Ri(t){return Ci(t,Pn,Oi)}function dd(t){return Ci(t,Uc,hd)}var Ie=yt(et,"DataView"),Oe=yt(et,"Promise"),Ce=yt(et,"Set"),Fi="[object Map]",pd="[object Object]",Li="[object Promise]",Di="[object Set]",Hi="[object WeakMap]",qi="[object DataView]",gd=gt(Ie),yd=gt(Wt),_d=gt(Oe),md=gt(Ce),vd=gt(be),st=Et;(Ie&&st(new Ie(new ArrayBuffer(1)))!=qi||Wt&&st(new Wt)!=Fi||Oe&&st(Oe.resolve())!=Li||Ce&&st(new Ce)!=Di||be&&st(new be)!=Hi)&&(st=function(t){var n=Et(t),e=n==pd?t.constructor:void 0,r=e?gt(e):"";if(r)switch(r){case gd:return qi;case yd:return Fi;case _d:return Li;case md:return Di;case vd:return Hi}return n});var Bi=et.Uint8Array,wd="__lodash_hash_undefined__";function xd(t){return this.__data__.set(t,wd),this}function bd(t){return this.__data__.has(t)}function On(t){var n=-1,e=t==null?0:t.length;for(this.__data__=new ot;++n<e;)this.add(t[n])}On.prototype.add=On.prototype.push=xd,On.prototype.has=bd;function Md(t,n){for(var e=-1,r=t==null?0:t.length;++e<r;)if(n(t[e],e,t))return!0;return!1}function $d(t,n){return t.has(n)}var Ad=1,Td=2;function Xi(t,n,e,r,i,o){var a=e&Ad,s=t.length,u=n.length;if(s!=u&&!(a&&u>s))return!1;var l=o.get(t),f=o.get(n);if(l&&f)return l==n&&f==t;var h=-1,c=!0,d=e&Td?new On:void 0;for(o.set(t,n),o.set(n,t);++h<s;){var p=t[h],m=n[h];if(r)var _=a?r(m,p,h,n,t,o):r(p,m,h,t,n,o);if(_!==void 0){if(_)continue;c=!1;break}if(d){if(!Md(n,function(g,v){if(!$d(d,v)&&(p===g||i(p,g,e,r,o)))return d.push(v)})){c=!1;break}}else if(!(p===m||i(p,m,e,r,o))){c=!1;break}}return o.delete(t),o.delete(n),c}function Gi(t){var n=-1,e=Array(t.size);return t.forEach(function(r,i){e[++n]=[i,r]}),e}function Nd(t){var n=-1,e=Array(t.size);return t.forEach(function(r){e[++n]=r}),e}var Sd=1,Pd=2,Ed="[object Boolean]",kd="[object Date]",zd="[object Error]",Id="[object Map]",Od="[object Number]",Cd="[object RegExp]",Rd="[object Set]",Fd="[object String]",Ld="[object Symbol]",Dd="[object ArrayBuffer]",Hd="[object DataView]",Ui=j?j.prototype:void 0,Re=Ui?Ui.valueOf:void 0;function qd(t,n,e,r,i,o,a){switch(e){case Hd:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case Dd:return!(t.byteLength!=n.byteLength||!o(new Bi(t),new Bi(n)));case Ed:case kd:case Od:return Sn(+t,+n);case zd:return t.name==n.name&&t.message==n.message;case Cd:case Fd:return t==n+"";case Id:var s=Gi;case Rd:var u=r&Sd;if(s||(s=Nd),t.size!=n.size&&!u)return!1;var l=a.get(t);if(l)return l==n;r|=Pd,a.set(t,n);var f=Xi(s(t),s(n),r,i,o,a);return a.delete(t),f;case Ld:if(Re)return Re.call(t)==Re.call(n)}return!1}var Bd=1,Xd=Object.prototype,Gd=Xd.hasOwnProperty;function Ud(t,n,e,r,i,o){var a=e&Bd,s=Ri(t),u=s.length,l=Ri(n),f=l.length;if(u!=f&&!a)return!1;for(var h=u;h--;){var c=s[h];if(!(a?c in n:Gd.call(n,c)))return!1}var d=o.get(t),p=o.get(n);if(d&&p)return d==n&&p==t;var m=!0;o.set(t,n),o.set(n,t);for(var _=a;++h<u;){c=s[h];var g=t[c],v=n[c];if(r)var x=a?r(v,g,c,n,t,o):r(g,v,c,t,n,o);if(!(x===void 0?g===v||i(g,v,e,r,o):x)){m=!1;break}_||(_=c=="constructor")}if(m&&!_){var y=t.constructor,w=n.constructor;y!=w&&"constructor"in t&&"constructor"in n&&!(typeof y=="function"&&y instanceof y&&typeof w=="function"&&w instanceof w)&&(m=!1)}return o.delete(t),o.delete(n),m}var Yd=1,Yi="[object Arguments]",Vi="[object Array]",Cn="[object Object]",Vd=Object.prototype,Ki=Vd.hasOwnProperty;function Kd(t,n,e,r,i,o){var a=B(t),s=B(n),u=a?Vi:st(t),l=s?Vi:st(n);u=u==Yi?Cn:u,l=l==Yi?Cn:l;var f=u==Cn,h=l==Cn,c=u==l;if(c&&Ae(t)){if(!Ae(n))return!1;a=!0,f=!1}if(c&&!f)return o||(o=new at),a||wi(t)?Xi(t,n,e,r,i,o):qd(t,n,u,e,r,i,o);if(!(e&Yd)){var d=f&&Ki.call(t,"__wrapped__"),p=h&&Ki.call(n,"__wrapped__");if(d||p){var m=d?t.value():t,_=p?n.value():n;return o||(o=new at),i(m,_,e,r,o)}}return c?(o||(o=new at),Ud(t,n,e,r,i,o)):!1}function Fe(t,n,e,r,i){return t===n?!0:t==null||n==null||!kt(t)&&!kt(n)?t!==t&&n!==n:Kd(t,n,e,r,Fe,i)}var Zd=1,Wd=2;function Jd(t,n,e,r){var i=e.length,o=i;if(t==null)return!o;for(t=Object(t);i--;){var a=e[i];if(a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){a=e[i];var s=a[0],u=t[s],l=a[1];if(a[2]){if(u===void 0&&!(s in t))return!1}else{var f=new at,h;if(!(h===void 0?Fe(l,u,Zd|Wd,r,f):h))return!1}}return!0}function Zi(t){return t===t&&!rt(t)}function Qd(t){for(var n=Pn(t),e=n.length;e--;){var r=n[e],i=t[r];n[e]=[r,i,Zi(i)]}return n}function Wi(t,n){return function(e){return e==null?!1:e[t]===n&&(n!==void 0||t in Object(e))}}function jd(t){var n=Qd(t);return n.length==1&&n[0][2]?Wi(n[0][0],n[0][1]):function(e){return e===t||Jd(e,t,n)}}function tp(t,n){return t!=null&&n in Object(t)}function Ji(t,n,e){n=In(n,t);for(var r=-1,i=n.length,o=!1;++r<i;){var a=Jt(n[r]);if(!(o=t!=null&&e(t,a)))break;t=t[a]}return o||++r!=i?o:(i=t==null?0:t.length,!!i&&Me(i)&&Nn(a,i)&&(B(t)||$e(t)))}function np(t,n){return t!=null&&Ji(t,n,tp)}var ep=1,rp=2;function ip(t,n){return Ne(t)&&Zi(n)?Wi(Jt(t),n):function(e){var r=$h(e,t);return r===void 0&&r===n?np(e,t):Fe(n,r,ep|rp)}}function op(t){return function(n){return n==null?void 0:n[t]}}function ap(t){return function(n){return Pe(n,t)}}function sp(t){return Ne(t)?op(Jt(t)):ap(t)}function Le(t){return typeof t=="function"?t:t==null?si:typeof t=="object"?B(t)?ip(t[0],t[1]):jd(t):sp(t)}function up(t){return function(n,e,r){for(var i=-1,o=Object(n),a=r(n),s=a.length;s--;){var u=a[++i];if(e(o[u],u,o)===!1)break}return n}}var lp=up();function fp(t,n){return t&&lp(t,n,Pn)}function cp(t,n){return function(e,r){if(e==null)return e;if(!Vt(e))return t(e,r);for(var i=e.length,o=-1,a=Object(e);++o<i&&r(a[o],o,a)!==!1;);return e}}var De=cp(fp);function hp(t){return typeof t=="function"?t:si}function Rn(t,n){var e=B(t)?Uf:De;return e(t,hp(n))}function dp(t,n){return Tn(n,function(e){return[e,t[e]]})}function pp(t){var n=-1,e=Array(t.size);return t.forEach(function(r){e[++n]=[r,r]}),e}var gp="[object Map]",yp="[object Set]";function _p(t){return function(n){var e=st(n);return e==gp?Gi(n):e==yp?pp(n):dp(n,t(n))}}var Qi=_p(Pn);function mp(t,n){var e=[];return De(t,function(r,i,o){n(r,i,o)&&e.push(r)}),e}function Fn(t,n){var e=B(t)?ki:mp;return e(t,Le(n))}function vp(t,n){var e=-1,r=Vt(t)?Array(t.length):[];return De(t,function(i,o,a){r[++e]=n(i,o,a)}),r}function Qt(t,n){var e=B(t)?Tn:vp;return e(t,Le(n))}var wp=Object.prototype,xp=wp.hasOwnProperty;function bp(t,n){return t!=null&&xp.call(t,n)}function Mp(t,n){return t!=null&&Ji(t,n,bp)}function $p(t,n,e,r){if(!rt(t))return t;n=In(n,t);for(var i=-1,o=n.length,a=o-1,s=t;s!=null&&++i<o;){var u=Jt(n[i]),l=e;if(u==="__proto__"||u==="constructor"||u==="prototype")return t;if(i!=a){var f=s[u];l=void 0,l===void 0&&(l=rt(f)?f:Nn(n[i+1])?[]:{})}Jf(s,u,l),s=s[u]}return t}function Ap(t,n,e){for(var r=-1,i=n.length,o={};++r<i;){var a=n[r],s=Pe(t,a);e(s,a)&&$p(o,In(a,t),s)}return o}function Tp(t,n){if(t==null)return{};var e=Tn(dd(t),function(r){return[r]});return n=Le(n),Ap(t,e,function(r,i){return n(r,i[0])})}var Np=Math.ceil,Sp=Math.max;function Pp(t,n,e,r){for(var i=-1,o=Sp(Np((n-t)/(e||1)),0),a=Array(o);o--;)a[++i]=t,t+=e;return a}function Ep(t){return function(n,e,r){return r&&typeof r!="number"&&jf(n,e,r)&&(e=r=void 0),n=we(n),e===void 0?(e=n,n=0):e=we(e),r=r===void 0?n<e?1:-1:we(r),Pp(n,e,r)}}var Ln=Ep();function kp(){var t=arguments,n=zn(t[0]);return t.length<3?n:n.replace(t[1],t[2])}const zp=(t,n,e=12,r=12)=>{const i=q().domain([0,e]).range([0,t]),o=q().domain([0,r]).range([0,n]);return{points:function(){return Ln((e+1)*(r+1)).map(function(u){return{m:u%(e+1),n:Math.floor(u/(e+1)),x:i(u%(e+1)),y:o(Math.floor(u/(e+1)))}})},position:function(u,l){typeof u=="number"&&(u=[u]),typeof l=="number"&&(l=[l]);const f=Nh(Qt(l,function(h){return Qt(u,function(c){return{x:i(c),y:o(h)}})}));return f.length==1?f[0]:f}}},M={widget:"_widget_18g36_1",label:"_label_18g36_19",lit:"_lit_18g36_24",button:"_button_18g36_29",symbol:"_symbol_18g36_29",radio:"_radio_18g36_29",radiobutton:"_radiobutton_18g36_29",selected:"_selected_18g36_35",toggle:"_toggle_18g36_35",slider:"_slider_18g36_44",track:"_track_18g36_44",track_overlay:"_track_overlay_18g36_48",handle:"_handle_18g36_55"},ji=()=>{const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz01234567890",e=n.length;let r="";for(let i=0;i<10;++i)r+=n[Math.floor(Math.random()*e)];return r},He=(t,n,e)=>{var r,i,o,a;switch(e){case"top":r=0,i=-n/2-5,o="middle",a="bottom";break;case"bottom":r=0,i=n/2+5,o="middle",a="hanging";break;case"left":r=-t/2-5,i=0,o="end",a="middle";break;case"right":r=t/2+5,i=0,o="start",a="middle";break;default:r=0,i=n/2+5,o="middle",a="hanging"}return{x:r,y:i,anchor:o,valign:a}},Ip=(t=1)=>{const n=Z();return n.moveTo(t*1,t*0),n.lineTo(t*-.5,t*(Math.sqrt(3)/2)),n.lineTo(t*-.5,t*(-Math.sqrt(3)/2)),n.closePath(),n.toString()},Op=(t=1)=>{const n=Z(),e=.7;return n.moveTo(e*t*(1+.75),e*t*0),n.lineTo(e*t*(-.5+.75),e*t*(Math.sqrt(3)/2)),n.lineTo(e*t*(-.5+.75),e*t*(-Math.sqrt(3)/2)),n.closePath(),n.moveTo(e*t*(1-.75),e*t*0),n.lineTo(e*t*(-.5-.75),e*t*(Math.sqrt(3)/2)),n.lineTo(e*t*(-.5-.75),e*t*(-Math.sqrt(3)/2)),n.closePath(),n.toString()},Cp=(t=1)=>{const n=Z();return n.moveTo(-t*1,t*0),n.lineTo(t*.5,t*(Math.sqrt(3)/2)),n.lineTo(t*.5,t*(-Math.sqrt(3)/2)),n.closePath(),n.toString()},Rp=(t=1)=>{const n=.3333333333333333,e=.9;var r=Z();return r.moveTo(t*e,t*e),r.lineTo(t*e,t*-.9),r.lineTo(t*(e*n),t*-.9),r.lineTo(t*(e*n),t*e),r.closePath(),r.moveTo(-t*e,t*e),r.lineTo(-t*e,t*-.9),r.lineTo(-t*(e*n),t*-.9),r.lineTo(-t*(e*n),t*e),r.closePath(),r.toString()},Fp=(t=1)=>{const n=Z(),e=Math.PI/2.5,r=e/2,i=2*Math.PI-e/2,o=.5,a=.6,s=.6,u=[t*(1-o/2)*Math.cos(i),t*(1-o/2)*Math.sin(i)],l=[t*s*Math.cos(i+Math.PI/2),t*s*Math.sin(i+Math.PI/2)];return n.moveTo(t*Math.cos(i),t*Math.sin(i)),n.arc(0,0,t,i,r,!0),n.lineTo(t*(1-o)*Math.cos(r),t*(1-o)*Math.sin(r)),n.arc(0,0,t*(1-o),r,i,!1),n.lineTo(t*(1-a-o/2)*Math.cos(i),t*(1-a-o/2)*Math.sin(i)),n.lineTo(u[0]+l[0],u[1]+l[1]),n.lineTo(t*(1+a-o/2)*Math.cos(i),t*(1+a-o/2)*Math.sin(i)),n.closePath(),n.toString()},Lp=(t=1)=>{const n=Z(),e=Math.PI/10,r=t/2,i=Math.PI-e,o=e,a=-e,s=Math.PI+e;return n.arc(0,0,r,s,a),n.lineTo(t,r*Math.sin(s)),n.lineTo(t,-t),n.lineTo(-t,-t),n.lineTo(-t,r*Math.sin(s)),n.closePath(),n.arc(0,0,r,o,i),n.lineTo(-t,r*Math.sin(i)),n.lineTo(-t,t),n.lineTo(t,t),n.lineTo(t,r*Math.sin(i)),n.closePath(),n.toString()},Dp=(t=1)=>{const n=Z(),e=Math.PI/2.5,r=e/2+Math.PI,i=2*Math.PI-e/2+Math.PI,o=.5,a=.6,s=-.6;n.moveTo(t*Math.cos(r),t*Math.sin(r)),n.arc(0,0,t,r,i,!1),n.lineTo(t*(1-o)*Math.cos(i),t*(1-o)*Math.sin(i)),n.arc(0,0,t*(1-o),i,r,!0),n.lineTo(t*(1-a-o/2)*Math.cos(r),t*(1-a-o/2)*Math.sin(r));var u=[t*(1-o/2)*Math.cos(r),t*(1-o/2)*Math.sin(r)],l=[t*s*Math.cos(r+Math.PI/2),t*s*Math.sin(r+Math.PI/2)];return n.lineTo(u[0]+l[0],u[1]+l[1]),n.lineTo(t*(1+a-o/2)*Math.cos(r),t*(1+a-o/2)*Math.sin(r)),n.closePath(),n.toString()},Hp=(t=1)=>{var n=Z(),e=.9;return n.moveTo(t*e,t*e),n.lineTo(t*-.9,t*e),n.lineTo(t*-.9,t*-.9),n.lineTo(t*e,t*-.9),n.closePath(),n.toString()},qp=(t=1)=>{const n=Z(),e=0,r=2*Math.PI;return n.moveTo(t*Math.cos(e),t*Math.sin(e)),n.arc(0,0,t,e,r,!0),n.closePath(),n.toString()},qe=t=>{switch(t){case"play":return Ip;case"forward":return Op;case"back":return Cp;case"pause":return Rp;case"reload":return Fp;case"capture":return Lp;case"rewind":return Dp;case"stop":return Hp;case"push":return qp}},Be=()=>{const t="button";var n=ji(),e=50,r=.3,i="round",o={x:0,y:0},a=null,s="bottom",u=null,l=function(p){},f=["play"],h=0;return{type:t,id:function(p){return typeof p>"u"?n:(n=p,this)},size:function(p){return typeof p>"u"?e:(e=p,this)},symbolsize:function(p){return typeof p>"u"?r:(r=p,this)},shape:function(p){return typeof p>"u"?i:(i=p,this)},position:function(p){return typeof p>"u"?o:(o=p,this)},x:function(p){return typeof p>"u"?o.x:(o.x=p,this)},y:function(p){return typeof p>"u"?o.y:(o.y=p,this)},label:function(p){return typeof p>"u"?a:(a=p,this)},labelposition:function(p){return typeof p>"u"?s:(s=p,this)},fontsize:function(p){return typeof p>"u"?u:(u=p,this)},update:function(p){if(typeof p=="function")return l=p,this;l(p)},actions:function(p){return typeof p>"u"?f:(f=p,this)},value:function(p){return typeof p>"u"?h:(h=p,this)},click:function(){h=(h+1)%f.length,l(),I(this.parentNode).select("."+M.symbol).attr("d",qe(f[h])(r*e))},press:function(p){h=(h+1)%f.length,l(),p.select("#button_"+n).select("."+M.symbol).attr("d",qe(f[h])(r*e))}}},Bp=()=>{const t="slider",n=$n(".3f");var e=ji(),r=100,i=8,o=10,a=!1,s={x:0,y:0},u="top-left",l=null,f=function(g){},h=function(g){},c=[0,1],d=0,p=null,m=q().domain(c).range([0,r]).clamp(!0);const _=function(g,v,x=c){const y=g.select("#slider_"+e);m.domain(x),d=v,y.selectAll("."+M.handle).transition().attr("cx",m(v)),a&&y.select("."+M.label).text(p+" = "+n(d)),f(),h()};return{type:t,scale:m,id:function(g){return typeof g>"u"?e:(e=g,this)},label:function(g){return typeof g>"u"?p:(p=g,this)},size:function(g){return typeof g>"u"?r:(r=g,this)},girth:function(g){return typeof g>"u"?i:(i=g,this)},knob:function(g){return typeof g>"u"?o:(o=g,this)},show:function(g){return typeof g>"u"?a:(a=g,this)},position:function(g){return typeof g>"u"?s:(s=g,this)},x:function(g){return typeof g>"u"?s.x:(s.x=g,this)},y:function(g){return typeof g>"u"?s.y:(s.y=g,this)},labelposition:function(g){return typeof g>"u"?u:(u=g,this)},fontsize:function(g){return typeof g>"u"?l:(l=g,this)},update:function(g){if(typeof g=="function")return f=g,this;f(g)},update_end:function(g){if(typeof g=="function")return h=g,this;h(g)},range:function(g){return typeof g>"u"?c:(c=g,this)},value:function(g){return typeof g>"u"?d:(d=g,this)},reset:_,click:_}},Xp=(t,n)=>{const e="button_"+t.id(),r=t.label(),i=t.labelposition(),o=document.createElementNS("http://www.w3.org/2000/svg","g"),a=I(o).attr("class",M.widget+" "+M.button).attr("id",e).attr("transform","translate("+t.x()+","+t.y()+")");var s;if(t.shape()=="rect"?s=a.append("rect").attr("width",t.size()).attr("height",t.size()).attr("transform","translate("+-t.size()/2+","+-t.size()/2+")").attr("rx",5).attr("ry",5):s=a.append("circle").attr("r",t.size()/2),s.attr("class",M.background).on("click",t.click).on("mouseover",function(){I(this).classed(M.lit,!0),I(this.parentNode).select("."+M.symbol).classed(M.lit,!0)}).on("mouseout",function(){I(this).classed(M.lit,!1),I(this.parentNode).select("."+M.symbol).classed(M.lit,!1)}),a.append("path").attr("d",qe(t.actions()[t.value()])(t.symbolsize()*t.size())).attr("class",M.symbol),r){const u=He(t.size(),t.size(),i);a.append("text").text(r).attr("class",M.label).style("text-anchor",u.anchor).style("font-size",t.fontsize()).style("alignment-baseline",u.valign).attr("transform","translate("+u.x+","+u.y+")")}return o},to=(t,n)=>{const e=Z();return e.moveTo(0,n/2),e.arc(0,0,n/2,Math.PI/2,3*Math.PI/2,!1),e.lineTo(t,-n/2),e.arc(t,0,n/2,3*Math.PI/2,2*Math.PI+Math.PI/2,!1),e.closePath(),e.toString()},Gp=(t,n)=>{const e=$n(".3f"),r="slider_"+t.id();t.labelposition();const i=t.range,o=t.size();t.label();const a=t.scale;var s;const u=document.createElementNS("http://www.w3.org/2000/svg","g");s=I(u).attr("class",M.widget+" "+M.slider).attr("id",r).attr("transform","translate("+t.x()+","+t.y()+")"),a.domain(i()).range([0,o]).clamp(!0);const l=t.knob()>t.girth()?t.knob():t.girth()/2;s.append("path").attr("d",to(t.size(),t.girth())).attr("class",M.track),s.append("circle").attr("class",M.handle).attr("r",t.knob()).attr("cx",a(t.value())),s.append("rect").attr("width",t.size()+2*l).attr("height",2*l).attr("transform","translate("+-l+","+-l+")").attr("class",M.track_overlay).on("click",function(p){const m=Qn(p,this)[0];t.value(a.invert(m)),t.update(),t.update_end(),s.selectAll("."+M.handle).attr("cx",a(t.value())),t.show()&&s.select("."+M.label).text(t.label()+" = "+e(t.value()))}).call(hr().on("drag",function(p){t.value(a.invert(p.x)),t.update(),s.selectAll("."+M.handle).attr("cx",a(t.value())),t.show()&&s.select("."+M.label).text(t.label()+" = "+e(t.value()))}).on("end",function(p){t.update_end()}));var f,h,c,d="bottom";return t.fontsize&&(h=t.labelposition().match(/bottom/i)!=null?nn([t.girth()/2,t.knob()])+t.fontsize()/2:-nn([t.girth()/2,t.knob()])-t.fontsize()/2),h=t.labelposition().match(/bottom/i)!=null?nn([t.girth()/2,t.knob()])+7:-nn([t.girth()/2,t.knob()])-7,f=t.labelposition().match(/right/i)!=null?t.size():t.labelposition().match(/center/i)!=null?t.size()/2:0,c=t.labelposition().match(/right/i)!=null?"end":t.labelposition().match(/center/i)!=null?"middle":"start",d=t.labelposition().match(/bottom/i)!=null?"hanging":"top",s.append("text").text(t.show()?t.label()+" = "+e(t.value()):t.label()).attr("class",M.label).style("text-anchor",c).style("alignment-baseline",d).style("font-size",t.fontsize()).style("opacity",1).attr("transform","translate("+f+","+h+")"),u},Up=(t,n)=>{const e="toggle_"+t.id(),r=t.size(),i=t.label(),o=t.labelposition(),a=document.createElementNS("http://www.w3.org/2000/svg","g"),s=I(a).attr("class",M.widget+" "+M.toggle).attr("id",e).attr("transform","translate("+(t.x()-r)+","+t.y()+")").classed(M.selected,t.value()==1);if(s.append("path").attr("d",to(2*t.size(),2*t.size())).attr("class",M.track),s.append("circle").attr("class",M.handle).attr("r",r).attr("cx",t.value()?2*r:0),s.append("rect").attr("width",4*t.size()).attr("height",2*t.size()).attr("class",M.track_overlay).attr("transform","translate("+-t.size()+","+-t.size()+")").on("click",t.click),i){const u=He(4*t.size(),2*t.size(),o);s.append("text").text(i).attr("class",M.label).style("text-anchor",u.anchor).style("font-size",t.fontsize()).style("alignment-baseline",u.valign).attr("transform","translate("+(u.x+r)+","+u.y+")")}return a},Yp=(t,n)=>{const e="radio_"+t.id(),r=t.labelposition(),i=t.buttonsize(),o=t.buttonsize()*(1-t.buttonpadding()),a=t.choices().length,s=Mo(a),u=q().domain([0,a-1]).range([0,t.size()]),l=q().domain([0,a-1]).range([0,t.size()]),f=document.createElementNS("http://www.w3.org/2000/svg","g"),c=I(f).attr("class",M.widget+" "+M.radio).attr("id",e).attr("transform","translate("+t.x()+","+t.y()+")").selectAll("."+M.radiobutton).data(s).enter().append("g").attr("class",M.radiobutton).attr("id",_=>"b"+_).attr("transform",_=>t.orientation()=="vertical"?"translate(0,"+l(_)+")":"translate("+u(_)+",0)");var d,p;t.shape()=="rect"?(d=c.append("rect").attr("width",i).attr("height",i).attr("rx",2).attr("ry",2).attr("transform","translate("+-i/2+","+-i/2+")"),p=c.append("rect").attr("width",o).attr("height",o).attr("rx",2).attr("ry",2).attr("transform","translate("+-o/2+","+-o/2+")")):(d=c.append("circle").attr("r",i/2),p=c.append("circle").attr("r",o/2)),d.attr("class",M.background).on("mouseover",function(){I(this).classed(M.lit,!0),I(this.parentNode).select("."+M.symbol).classed(M.lit,!0)}).on("mouseout",function(){I(this).classed(M.lit,!1),I(this.parentNode).select("."+M.symbol).classed(M.lit,!1)}),p.attr("class",M.symbol),p.filter(_=>_==t.value()).classed(M.selected,!0),c.on("click",t.click);const m=He(t.buttonsize(),t.buttonsize(),r);return c.append("text").attr("class",M.label).text(function(_,g){return t.choices()[g]}).attr("alignment-baseline",m.valign).attr("transform","translate("+m.x+","+m.y+")").style("font-size",t.fontsize()).attr("text-anchor",m.anchor),f},no=(t,n)=>{switch(t.type){case"button":return Xp(t);case"slider":return Gp(t);case"radio":return Yp(t);case"toggle":return Up(t)}},Vp=(t,n)=>{const e=zp(n.controls_size.width,n.controls_size.height,n.controls_grid.nx,n.controls_grid.ny),r=I("#"+t).classed("explorable "+n.container_class,!0),i=r.append("div").attr("id","display").attr("class","display-panel").classed(n.display_class,!0).classed(n.debug_lattice,n.debug).append(n.display_type).attr("width",n.display_type=="canvas"?n.display_size.width:null).attr("height",n.display_type=="canvas"?n.display_size.height:null).attr("viewBox",n.display_type=="canvas"?null:"0 0 "+n.display_size.width+" "+n.display_size.height).style("width","100%"),o=r.append("div").attr("id","controls").attr("class","control-panel").classed(n.controls_class,!0).classed(n.debug_lattice,n.debug).append("svg").attr("viewBox","0 0 "+n.controls_size.width+" "+n.controls_size.height).style("width","100%").style("height","100%");return typeof n.controls_border=="string"&&n.controls_border.length>0&&o.style("border",n.controls_border),typeof n.display_border=="string"&&n.display_border.length>0&&i.style("border",n.display_border),n.debug&&o.selectAll(null).data(e.points).enter().append("circle").attr("r",2).attr("transform",a=>"translate("+a.x+","+a.y+")").style("fill","black"),{display:i,controls:o,grid:e}},k={widgets:{slider_size:400,slider_gap:2,slider_anchor:{x:1,y:8},slider_girth:12,slider_knob:14,playbutton_size:120,playbutton_anchor:{x:3,y:2},backbutton_anchor:{x:4,y:5},resetbutton_anchor:{x:2,y:5}},simulation:{delay:10,node_min_size:3,node_max_size:10},plot:{anchor:{x:7,y:6},width:150}},O={L:200,N:160,N_opinion:10,mean_k:2.4,openmindedness:{range:[0,1],default:.2},rewiring_probability:{range:[0,1],default:.1}},Kp=t=>Qt(Qi(t),n=>{n[1].id=n[0],n[1].label=kp(ed(n[0]),/_/g," ")}),Zp=t=>Qt(Qi(t),n=>n[1]),Wp=(t,n)=>Rn(t,(e,r)=>e.widget=n[r]),Jp=t=>Tp(t,n=>Mp(n,"range"));q().domain([0,360]).range([0,2*Math.PI]),q().range([0,360]).domain([0,2*Math.PI]);const Qp=(t,n)=>{Rn(t,e=>{e.k=n.filter(r=>r.source.id==e.id||r.target.id==e.id).length})},Xe=Jp(O);Kp(Xe);const eo=Zp(Xe),Dn=Qt(eo,t=>Bp().id(t.id).label(t.label).range(t.range).value(t.default).size(k.widgets.slider_size).girth(k.widgets.slider_girth).knob(k.widgets.slider_knob));Wp(eo,Dn);const ut=Be().actions(["play","pause"]),Hn=Be().actions(["back"]),qn=Be().actions(["rewind"]),jp=[ut,Hn,qn],t0=(t,n)=>{const e=n.position(k.widgets.slider_anchor.x,Ln(Dn.length).map(r=>k.widgets.slider_anchor.y+k.widgets.slider_gap*r));Dn.forEach((r,i)=>r.position(e[i])),ut.position(n.position(k.widgets.playbutton_anchor.x,k.widgets.playbutton_anchor.y)).size(k.widgets.playbutton_size),qn.position(n.position(k.widgets.backbutton_anchor.x,k.widgets.backbutton_anchor.y)),Hn.position(n.position(k.widgets.resetbutton_anchor.x,k.widgets.resetbutton_anchor.y)),t.selectAll(null).data(Dn).enter().append(no),t.selectAll(null).data(jp).enter().append(no)},n0=t=>{Rn(Xe,n=>n.widget.reset(t,n.default))};var X=[],zt=[],G;const Ge=O.N,ro=O.L,e0=O.N_opinion,r0=()=>{O.timer={},O.tick=0,zt=[],X=Ln(Ge).map(e=>({id:e,opinion:Math.floor(Math.random()*e0),x:(Math.random()-.5)*2*ro,y:(Math.random()-.5)*2*ro}));for(var t=0;t<Ge;t++)for(var n=0;n<t;n++)Math.random()<O.mean_k/(Ge-1)&&zt.push({source:X[t],target:X[n]});Qp(X,zt)},i0=()=>{O.tick++;const t=O.openmindedness.widget.value(),n=O.rewiring_probability.widget.value(),e=zt.filter(r=>r.source.opinion!=r.target.opinion);if(e.length>0)if(G=e[Math.floor(Math.random()*e.length)],Math.random()<1-n)Math.random()<.5?G.source.opinion=G.target.opinion:G.target.opinion=G.source.opinion;else{let r=G.source,i=G.target,o=G.source.opinion,a=G.target.opinion;if(Math.random()<.5){let s=Math.random()<1-t?Fn(X,u=>u.opinion==o&&u.id!=r.id):Fn(X,u=>u.id!=r.id);s.length>0&&(G.target=s[Math.floor(Math.random()*s.length)])}else{let s=Math.random()<1-t?Fn(X,u=>u.opinion==a&&u.id!=i.id):Fn(X,u=>u.id!=i.id);s.length>0&&(G.source=s[Math.floor(Math.random()*s.length)])}}return e.length>0},mt={node:"_node_ltm0z_1",edge:"_edge_ltm0z_7",plot:"_plot_ltm0z_12",xaxis:"_xaxis_ltm0z_16",spike:"_spike_ltm0z_20"};var Ue,Ye,Bn;const vt=q().domain([-O.L,O.L]),wt=q().domain([-O.L,O.L]);var io=q().range([k.simulation.node_min_size,k.simulation.node_max_size]),oo=jr;const o0=(t,n)=>{const e=n.display_size.width,r=n.display_size.height;vt.range([0,e]),wt.range([0,r]),io.domain(_o(X,function(o){return o.k})),t.selectAll("#origin").remove();const i=t.append("g").attr("id","origin");Ue=i.selectAll(null).data(zt).enter().append("line").attr("class",mt.edge).attr("x1",function(o){return vt(o.source.x)}).attr("y1",function(o){return wt(o.source.y)}).attr("x2",function(o){return vt(o.target.x)}).attr("y2",function(o){return wt(o.target.y)}),Ye=i.selectAll(null).data(X).enter().append("circle").attr("class",mt.node).attr("transform",function(o){return"translate("+vt(o.x)+","+wt(o.y)+")"}).attr("r",function(o){return io(o.k)}).style("fill",function(o){return oo[o.opinion]}).call(hr().on("start",s0).on("drag",u0).on("end",l0)),Bn=Ol(X).force("charge",Cl().strength(-20)).force("link",Tl(zt).distance(10).strength(1)).force("x",Rl()).force("y",Fl()).alphaTarget(0).on("tick",f0)},a0=(t,n)=>{Ye.style("fill",function(e){return oo[e.opinion]}),Ue.style("stroke",function(e){return e.index==G.index?"red":"gray"}).style("stroke-width",function(e){return e.index==G.index?"5":"1"}),O.tick%10==0&&Bn.alpha(.4).restart()};function s0(t,n){t.active||Bn.alphaTarget(.3).restart(),n.fx=n.x,n.fy=n.y}function u0(t,n){n.fx=t.x,n.fy=t.y}function l0(t,n){t.active||Bn.alphaTarget(0),n.fx=null,n.fy=null}function f0(){Ue.attr("x1",function(t){return vt(t.source.x)}).attr("y1",function(t){return wt(t.source.y)}).attr("x2",function(t){return vt(t.target.x)}).attr("y2",function(t){return wt(t.target.y)}),Ye.attr("transform",function(t){return"translate("+vt(t.x)+","+wt(t.y)+")"})}var c0=jr;function ao(t){let n=[];return Rn(Ln(O.N_opinion),e=>{n[e]=t.filter(function(r){return r.opinion==e}).length}),n}var Ve=q().domain([0,O.N_opinion]).range([0,k.plot.width]),Xn=q().range([0,-280]),h0=Eo(Ve).tickFormat("");ko(Xn).tickFormat("");const so=(t,n)=>"M"+(6+Ve(n))+","+Xn(0)+"L"+(6+Ve(n))+","+Xn(t),d0=(t,n)=>{const e=ao(X);Xn.domain([0,O.N]);const r=n.position(k.plot.anchor.x,k.plot.anchor.y);t.select("."+mt.plot).remove();const i=t.append("g").attr("class",mt.plot).attr("transform","translate("+r.x+","+r.y+")");i.append("g").call(h0).attr("class",mt.xaxis),i.selectAll(null).data(e).enter().append("path").attr("class",mt.spike).attr("d",so).style("stroke",function(o,a){return c0[a]})},p0=t=>{const n=ao(X);t.selectAll("."+mt.spike).data(n).attr("d",so)};function g0(t,n,e){const r=i0();a0(),p0(n),r||(n.select("#button_play").transition(1e3).style("opacity",0),n.select("#button_play").style("pointer-events","none"),ut.press(n))}function uo(t,n){r0(),o0(t,n)}var lo={};const y0=(t,n,e)=>{ut.value()==1?lo=Qs(()=>g0(t,n),k.simulation.delay):lo.stop()},_0=(t,n,e)=>{qn.update(()=>n0(n)),ut.update(()=>y0(t,n)),Hn.update(()=>uo(t,e))},fo={name:"@explorables/echo_chambers",title:"Echo Chambers",subtitle:"A model for opinion dynamics",description:"This explorable illustrates a dynamic network that explains the emergence of groups of uniform opinion. Nodes can change their opinion based on their open-mindedness and can rewire their connections to other nodes that are like them.",author:"Dirk Brockmann (https://synosy.github.io)"};function co(t,n=bt){const e=Vp(t,n),r=e.display,i=e.controls,o=e.grid;return t0(i,o),_0(r,i,n),uo(r,n),d0(i,o),{halt(){ut.value()===1&&ut.press(i)},reset(){ut.value()===1&&ut.press(i),qn.press(i),Hn.press(i)},config:n,meta:fo}}C.config=bt,C.default=co,C.load=co,C.meta=fo,Object.defineProperties(C,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
